var Ec=Object.defineProperty;var Nc=(e,t,n)=>t in e?Ec(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ce=(e,t,n)=>Nc(e,typeof t!="symbol"?t+"":t,n);import{j}from"./index-Dc7tpNWJ.js";import{a as zi,g as Cc,R as T,r as E}from"./index-eCxJ45ll.js";function he(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=he(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var fr={exports:{}},hr={},pr={exports:{}},gr={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ao;function kc(){if(Ao)return gr;Ao=1;var e=zi();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function a(d,f){var h=f(),y=r({inst:{value:h,getSnapshot:f}}),g=y[0].inst,w=y[1];return i(function(){g.value=h,g.getSnapshot=f,c(g)&&w({inst:g})},[d,h,f]),o(function(){return c(g)&&w({inst:g}),d(function(){c(g)&&w({inst:g})})},[d]),s(h),h}function c(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function u(d,f){return f()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return gr.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:l,gr}var Mo;function Rc(){return Mo||(Mo=1,pr.exports=kc()),pr.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o;function Tc(){if($o)return hr;$o=1;var e=zi(),t=Rc();function n(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,i=e.useRef,s=e.useEffect,a=e.useMemo,c=e.useDebugValue;return hr.useSyncExternalStoreWithSelector=function(u,l,d,f,h){var y=i(null);if(y.current===null){var g={hasValue:!1,value:null};y.current=g}else g=y.current;y=a(function(){function m(C){if(!v){if(v=!0,N=C,C=f(C),h!==void 0&&g.hasValue){var k=g.value;if(h(k,C))return x=k}return x=C}if(k=x,r(N,C))return k;var B=f(C);return h!==void 0&&h(k,B)?k:(N=C,x=B)}var v=!1,N,x,A=d===void 0?null:d;return[function(){return m(l())},A===null?void 0:function(){return m(A())}]},[l,d,f,h]);var w=o(u,y[0],y[1]);return s(function(){g.hasValue=!0,g.value=w},[w]),c(w),w},hr}var qo;function Ac(){return qo||(qo=1,fr.exports=Tc()),fr.exports}var Mc=Ac();const $c=Cc(Mc),qc={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,STORYBOOK:"true"},Po=e=>{let t;const n=new Set,r=(l,d)=>{const f=typeof l=="function"?l(t):l;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(y=>y(t,h))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(qc?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,c);return c},Pc=e=>e?Po(e):Po,{useDebugValue:Dc}=T,{useSyncExternalStoreWithSelector:Hc}=$c,Bc=e=>e;function Oi(e,t=Bc,n){const r=Hc(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Dc(r),r}const Do=(e,t)=>{const n=Pc(e),r=(o,i=t)=>Oi(n,o,i);return Object.assign(r,n),r},Ic=(e,t)=>e?Do(e,t):Do;function fe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var zc={value:()=>{}};function Gn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Nn(n)}function Nn(e){this._=e}function Oc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Nn.prototype=Gn.prototype={constructor:Nn,on:function(e,t){var n=this._,r=Oc(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=Lc(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=Ho(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Ho(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Nn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function Lc(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Ho(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=zc,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ar="http://www.w3.org/1999/xhtml";const Bo={svg:"http://www.w3.org/2000/svg",xhtml:Ar,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Un(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Bo.hasOwnProperty(t)?{space:Bo[t],local:e}:e}function Fc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ar&&t.documentElement.namespaceURI===Ar?t.createElement(e):t.createElementNS(n,e)}}function jc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Li(e){var t=Un(e);return(t.local?jc:Fc)(t)}function Vc(){}function eo(e){return e==null?Vc:function(){return this.querySelector(e)}}function Yc(e){typeof e!="function"&&(e=eo(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=new Array(s),c,u,l=0;l<s;++l)(c=i[l])&&(u=e.call(c,c.__data__,l,i))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new Se(r,this._parents)}function Xc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Wc(){return[]}function Fi(e){return e==null?Wc:function(){return this.querySelectorAll(e)}}function Gc(e){return function(){return Xc(e.apply(this,arguments))}}function Uc(e){typeof e=="function"?e=Gc(e):e=Fi(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(r.push(e.call(c,c.__data__,u,s)),o.push(c));return new Se(r,o)}function ji(e){return function(){return this.matches(e)}}function Vi(e){return function(t){return t.matches(e)}}var Zc=Array.prototype.find;function Kc(e){return function(){return Zc.call(this.children,e)}}function Qc(){return this.firstElementChild}function Jc(e){return this.select(e==null?Qc:Kc(typeof e=="function"?e:Vi(e)))}var el=Array.prototype.filter;function tl(){return Array.from(this.children)}function nl(e){return function(){return el.call(this.children,e)}}function rl(e){return this.selectAll(e==null?tl:nl(typeof e=="function"?e:Vi(e)))}function ol(e){typeof e!="function"&&(e=ji(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Se(r,this._parents)}function Yi(e){return new Array(e.length)}function il(){return new Se(this._enter||this._groups.map(Yi),this._parents)}function Pn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Pn.prototype={constructor:Pn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function sl(e){return function(){return e}}function al(e,t,n,r,o,i){for(var s=0,a,c=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new Pn(e,i[s]);for(;s<c;++s)(a=t[s])&&(o[s]=a)}function cl(e,t,n,r,o,i,s){var a,c,u=new Map,l=t.length,d=i.length,f=new Array(l),h;for(a=0;a<l;++a)(c=t[a])&&(f[a]=h=s.call(c,c.__data__,a,t)+"",u.has(h)?o[a]=c:u.set(h,c));for(a=0;a<d;++a)h=s.call(e,i[a],a,i)+"",(c=u.get(h))?(r[a]=c,c.__data__=i[a],u.delete(h)):n[a]=new Pn(e,i[a]);for(a=0;a<l;++a)(c=t[a])&&u.get(f[a])===c&&(o[a]=c)}function ll(e){return e.__data__}function ul(e,t){if(!arguments.length)return Array.from(this,ll);var n=t?cl:al,r=this._parents,o=this._groups;typeof e!="function"&&(e=sl(e));for(var i=o.length,s=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var l=r[u],d=o[u],f=d.length,h=dl(e.call(l,l&&l.__data__,u,r)),y=h.length,g=a[u]=new Array(y),w=s[u]=new Array(y),m=c[u]=new Array(f);n(l,d,g,w,m,h,t);for(var v=0,N=0,x,A;v<y;++v)if(x=g[v]){for(v>=N&&(N=v+1);!(A=w[N])&&++N<y;);x._next=A||null}}return s=new Se(s,r),s._enter=a,s._exit=c,s}function dl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fl(){return new Se(this._exit||this._groups.map(Yi),this._parents)}function hl(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function pl(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),c=0;c<s;++c)for(var u=n[c],l=r[c],d=u.length,f=a[c]=new Array(d),h,y=0;y<d;++y)(h=u[y]||l[y])&&(f[y]=h);for(;c<o;++c)a[c]=n[c];return new Se(a,this._parents)}function gl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function ml(e){e||(e=yl);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],a=s.length,c=o[i]=new Array(a),u,l=0;l<a;++l)(u=s[l])&&(c[l]=u);c.sort(t)}return new Se(o,this._parents).order()}function yl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wl(){return Array.from(this)}function vl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function bl(){let e=0;for(const t of this)++e;return e}function Sl(){return!this.node()}function _l(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,a;i<s;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this}function El(e){return function(){this.removeAttribute(e)}}function Nl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cl(e,t){return function(){this.setAttribute(e,t)}}function kl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Rl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Tl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Al(e,t){var n=Un(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Nl:El:typeof t=="function"?n.local?Tl:Rl:n.local?kl:Cl)(n,t))}function Xi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ml(e){return function(){this.style.removeProperty(e)}}function $l(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ql(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Pl(e,t,n){return arguments.length>1?this.each((t==null?Ml:typeof t=="function"?ql:$l)(e,t,n??"")):Mt(this.node(),e)}function Mt(e,t){return e.style.getPropertyValue(t)||Xi(e).getComputedStyle(e,null).getPropertyValue(t)}function Dl(e){return function(){delete this[e]}}function Hl(e,t){return function(){this[e]=t}}function Bl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Il(e,t){return arguments.length>1?this.each((t==null?Dl:typeof t=="function"?Bl:Hl)(e,t)):this.node()[e]}function Wi(e){return e.trim().split(/^|\s+/)}function to(e){return e.classList||new Gi(e)}function Gi(e){this._node=e,this._names=Wi(e.getAttribute("class")||"")}Gi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ui(e,t){for(var n=to(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Zi(e,t){for(var n=to(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function zl(e){return function(){Ui(this,e)}}function Ol(e){return function(){Zi(this,e)}}function Ll(e,t){return function(){(t.apply(this,arguments)?Ui:Zi)(this,e)}}function Fl(e,t){var n=Wi(e+"");if(arguments.length<2){for(var r=to(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Ll:t?zl:Ol)(n,t))}function jl(){this.textContent=""}function Vl(e){return function(){this.textContent=e}}function Yl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Xl(e){return arguments.length?this.each(e==null?jl:(typeof e=="function"?Yl:Vl)(e)):this.node().textContent}function Wl(){this.innerHTML=""}function Gl(e){return function(){this.innerHTML=e}}function Ul(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Zl(e){return arguments.length?this.each(e==null?Wl:(typeof e=="function"?Ul:Gl)(e)):this.node().innerHTML}function Kl(){this.nextSibling&&this.parentNode.appendChild(this)}function Ql(){return this.each(Kl)}function Jl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eu(){return this.each(Jl)}function tu(e){var t=typeof e=="function"?e:Li(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nu(){return null}function ru(e,t){var n=typeof e=="function"?e:Li(e),r=t==null?nu:typeof t=="function"?t:eo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ou(){var e=this.parentNode;e&&e.removeChild(this)}function iu(){return this.each(ou)}function su(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function au(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cu(e){return this.select(e?au:su)}function lu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function uu(e){return function(t){e.call(this,t,this.__data__)}}function du(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function fu(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function hu(e,t,n){return function(){var r=this.__on,o,i=uu(t);if(r){for(var s=0,a=r.length;s<a;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function pu(e,t,n){var r=du(e+""),o,i=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(o=0,l=a[c];o<i;++o)if((s=r[o]).type===l.type&&s.name===l.name)return l.value}return}for(a=t?hu:fu,o=0;o<i;++o)this.each(a(r[o],t,n));return this}function Ki(e,t,n){var r=Xi(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function gu(e,t){return function(){return Ki(this,e,t)}}function mu(e,t){return function(){return Ki(this,e,t.apply(this,arguments))}}function yu(e,t){return this.each((typeof t=="function"?mu:gu)(e,t))}function*xu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Qi=[null];function Se(e,t){this._groups=e,this._parents=t}function dn(){return new Se([[document.documentElement]],Qi)}function wu(){return this}Se.prototype=dn.prototype={constructor:Se,select:Yc,selectAll:Uc,selectChild:Jc,selectChildren:rl,filter:ol,data:ul,enter:il,exit:fl,join:hl,merge:pl,selection:wu,order:gl,sort:ml,call:xl,nodes:wl,node:vl,size:bl,empty:Sl,each:_l,attr:Al,style:Pl,property:Il,classed:Fl,text:Xl,html:Zl,raise:Ql,lower:eu,append:tu,insert:ru,remove:iu,clone:cu,datum:lu,on:pu,dispatch:yu,[Symbol.iterator]:xu};function _e(e){return typeof e=="string"?new Se([[document.querySelector(e)]],[document.documentElement]):new Se([[e]],Qi)}function vu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ke(e,t){if(e=vu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const bu={passive:!1},en={capture:!0,passive:!1};function mr(e){e.stopImmediatePropagation()}function Rt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ji(e){var t=e.document.documentElement,n=_e(e).on("dragstart.drag",Rt,en);"onselectstart"in t?n.on("selectstart.drag",Rt,en):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function es(e,t){var n=e.document.documentElement,r=_e(e).on("dragstart.drag",null);t&&(r.on("click.drag",Rt,en),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const hn=e=>()=>e;function Mr(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}Mr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Su(e){return!e.ctrlKey&&!e.button}function _u(){return this.parentNode}function Eu(e,t){return t??{x:e.x,y:e.y}}function Nu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cu(){var e=Su,t=_u,n=Eu,r=Nu,o={},i=Gn("start","drag","end"),s=0,a,c,u,l,d=0;function f(x){x.on("mousedown.drag",h).filter(r).on("touchstart.drag",w).on("touchmove.drag",m,bu).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(x,A){if(!(l||!e.call(this,x,A))){var C=N(this,t.call(this,x,A),x,A,"mouse");C&&(_e(x.view).on("mousemove.drag",y,en).on("mouseup.drag",g,en),Ji(x.view),mr(x),u=!1,a=x.clientX,c=x.clientY,C("start",x))}}function y(x){if(Rt(x),!u){var A=x.clientX-a,C=x.clientY-c;u=A*A+C*C>d}o.mouse("drag",x)}function g(x){_e(x.view).on("mousemove.drag mouseup.drag",null),es(x.view,u),Rt(x),o.mouse("end",x)}function w(x,A){if(e.call(this,x,A)){var C=x.changedTouches,k=t.call(this,x,A),B=C.length,P,I;for(P=0;P<B;++P)(I=N(this,k,x,A,C[P].identifier,C[P]))&&(mr(x),I("start",x,C[P]))}}function m(x){var A=x.changedTouches,C=A.length,k,B;for(k=0;k<C;++k)(B=o[A[k].identifier])&&(Rt(x),B("drag",x,A[k]))}function v(x){var A=x.changedTouches,C=A.length,k,B;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),k=0;k<C;++k)(B=o[A[k].identifier])&&(mr(x),B("end",x,A[k]))}function N(x,A,C,k,B,P){var I=i.copy(),H=ke(P||C,A),L,z,p;if((p=n.call(x,new Mr("beforestart",{sourceEvent:C,target:f,identifier:B,active:s,x:H[0],y:H[1],dx:0,dy:0,dispatch:I}),k))!=null)return L=p.x-H[0]||0,z=p.y-H[1]||0,function R(_,$,D){var S=H,q;switch(_){case"start":o[B]=R,q=s++;break;case"end":delete o[B],--s;case"drag":H=ke(D||$,A),q=s;break}I.call(_,x,new Mr(_,{sourceEvent:$,subject:p,target:f,identifier:B,active:q,x:H[0]+L,y:H[1]+z,dx:H[0]-S[0],dy:H[1]-S[1],dispatch:I}),k)}}return f.filter=function(x){return arguments.length?(e=typeof x=="function"?x:hn(!!x),f):e},f.container=function(x){return arguments.length?(t=typeof x=="function"?x:hn(x),f):t},f.subject=function(x){return arguments.length?(n=typeof x=="function"?x:hn(x),f):n},f.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:hn(!!x),f):r},f.on=function(){var x=i.on.apply(i,arguments);return x===i?f:x},f.clickDistance=function(x){return arguments.length?(d=(x=+x)*x,f):Math.sqrt(d)},f}function no(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ts(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function fn(){}var tn=.7,Dn=1/tn,Tt="\\s*([+-]?\\d+)\\s*",nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ku=/^#([0-9a-f]{3,8})$/,Ru=new RegExp(`^rgb\\(${Tt},${Tt},${Tt}\\)$`),Tu=new RegExp(`^rgb\\(${Pe},${Pe},${Pe}\\)$`),Au=new RegExp(`^rgba\\(${Tt},${Tt},${Tt},${nn}\\)$`),Mu=new RegExp(`^rgba\\(${Pe},${Pe},${Pe},${nn}\\)$`),$u=new RegExp(`^hsl\\(${nn},${Pe},${Pe}\\)$`),qu=new RegExp(`^hsla\\(${nn},${Pe},${Pe},${nn}\\)$`),Io={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};no(fn,rn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zo,formatHex:zo,formatHex8:Pu,formatHsl:Du,formatRgb:Oo,toString:Oo});function zo(){return this.rgb().formatHex()}function Pu(){return this.rgb().formatHex8()}function Du(){return ns(this).formatHsl()}function Oo(){return this.rgb().formatRgb()}function rn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ku.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Lo(t):n===3?new we(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?pn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?pn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ru.exec(e))?new we(t[1],t[2],t[3],1):(t=Tu.exec(e))?new we(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Au.exec(e))?pn(t[1],t[2],t[3],t[4]):(t=Mu.exec(e))?pn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$u.exec(e))?Vo(t[1],t[2]/100,t[3]/100,1):(t=qu.exec(e))?Vo(t[1],t[2]/100,t[3]/100,t[4]):Io.hasOwnProperty(e)?Lo(Io[e]):e==="transparent"?new we(NaN,NaN,NaN,0):null}function Lo(e){return new we(e>>16&255,e>>8&255,e&255,1)}function pn(e,t,n,r){return r<=0&&(e=t=n=NaN),new we(e,t,n,r)}function Hu(e){return e instanceof fn||(e=rn(e)),e?(e=e.rgb(),new we(e.r,e.g,e.b,e.opacity)):new we}function $r(e,t,n,r){return arguments.length===1?Hu(e):new we(e,t,n,r??1)}function we(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}no(we,$r,ts(fn,{brighter(e){return e=e==null?Dn:Math.pow(Dn,e),new we(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tn:Math.pow(tn,e),new we(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new we(ct(this.r),ct(this.g),ct(this.b),Hn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fo,formatHex:Fo,formatHex8:Bu,formatRgb:jo,toString:jo}));function Fo(){return`#${it(this.r)}${it(this.g)}${it(this.b)}`}function Bu(){return`#${it(this.r)}${it(this.g)}${it(this.b)}${it((isNaN(this.opacity)?1:this.opacity)*255)}`}function jo(){const e=Hn(this.opacity);return`${e===1?"rgb(":"rgba("}${ct(this.r)}, ${ct(this.g)}, ${ct(this.b)}${e===1?")":`, ${e})`}`}function Hn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ct(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function it(e){return e=ct(e),(e<16?"0":"")+e.toString(16)}function Vo(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Re(e,t,n,r)}function ns(e){if(e instanceof Re)return new Re(e.h,e.s,e.l,e.opacity);if(e instanceof fn||(e=rn(e)),!e)return new Re;if(e instanceof Re)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,c=(i+o)/2;return a?(t===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-t)/a+2:s=(t-n)/a+4,a/=c<.5?i+o:2-i-o,s*=60):a=c>0&&c<1?0:s,new Re(s,a,c,e.opacity)}function Iu(e,t,n,r){return arguments.length===1?ns(e):new Re(e,t,n,r??1)}function Re(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}no(Re,Iu,ts(fn,{brighter(e){return e=e==null?Dn:Math.pow(Dn,e),new Re(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tn:Math.pow(tn,e),new Re(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new we(yr(e>=240?e-240:e+120,o,r),yr(e,o,r),yr(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Re(Yo(this.h),gn(this.s),gn(this.l),Hn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hn(this.opacity);return`${e===1?"hsl(":"hsla("}${Yo(this.h)}, ${gn(this.s)*100}%, ${gn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Yo(e){return e=(e||0)%360,e<0?e+360:e}function gn(e){return Math.max(0,Math.min(1,e||0))}function yr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const rs=e=>()=>e;function zu(e,t){return function(n){return e+n*t}}function Ou(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Lu(e){return(e=+e)==1?os:function(t,n){return n-t?Ou(t,n,e):rs(isNaN(t)?n:t)}}function os(e,t){var n=t-e;return n?zu(e,n):rs(isNaN(e)?t:e)}const Xo=function e(t){var n=Lu(t);function r(o,i){var s=n((o=$r(o)).r,(i=$r(i)).r),a=n(o.g,i.g),c=n(o.b,i.b),u=os(o.opacity,i.opacity);return function(l){return o.r=s(l),o.g=a(l),o.b=c(l),o.opacity=u(l),o+""}}return r.gamma=e,r}(1);function Ge(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var qr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xr=new RegExp(qr.source,"g");function Fu(e){return function(){return e}}function ju(e){return function(t){return e(t)+""}}function Vu(e,t){var n=qr.lastIndex=xr.lastIndex=0,r,o,i,s=-1,a=[],c=[];for(e=e+"",t=t+"";(r=qr.exec(e))&&(o=xr.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(r=r[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:Ge(r,o)})),n=xr.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?ju(c[0].x):Fu(t):(t=c.length,function(u){for(var l=0,d;l<t;++l)a[(d=c[l]).i]=d.x(u);return a.join("")})}var Wo=180/Math.PI,Pr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function is(e,t,n,r,o,i){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Wo,skewX:Math.atan(c)*Wo,scaleX:s,scaleY:a}}var mn;function Yu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pr:is(t.a,t.b,t.c,t.d,t.e,t.f)}function Xu(e){return e==null||(mn||(mn=document.createElementNS("http://www.w3.org/2000/svg","g")),mn.setAttribute("transform",e),!(e=mn.transform.baseVal.consolidate()))?Pr:(e=e.matrix,is(e.a,e.b,e.c,e.d,e.e,e.f))}function ss(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function i(u,l,d,f,h,y){if(u!==d||l!==f){var g=h.push("translate(",null,t,null,n);y.push({i:g-4,x:Ge(u,d)},{i:g-2,x:Ge(l,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(u,l,d,f){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:Ge(u,l)})):l&&d.push(o(d)+"rotate("+l+r)}function a(u,l,d,f){u!==l?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:Ge(u,l)}):l&&d.push(o(d)+"skewX("+l+r)}function c(u,l,d,f,h,y){if(u!==d||l!==f){var g=h.push(o(h)+"scale(",null,",",null,")");y.push({i:g-4,x:Ge(u,d)},{i:g-2,x:Ge(l,f)})}else(d!==1||f!==1)&&h.push(o(h)+"scale("+d+","+f+")")}return function(u,l){var d=[],f=[];return u=e(u),l=e(l),i(u.translateX,u.translateY,l.translateX,l.translateY,d,f),s(u.rotate,l.rotate,d,f),a(u.skewX,l.skewX,d,f),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,d,f),u=l=null,function(h){for(var y=-1,g=f.length,w;++y<g;)d[(w=f[y]).i]=w.x(h);return d.join("")}}}var Wu=ss(Yu,"px, ","px)","deg)"),Gu=ss(Xu,", ",")",")"),Uu=1e-12;function Go(e){return((e=Math.exp(e))+1/e)/2}function Zu(e){return((e=Math.exp(e))-1/e)/2}function Ku(e){return((e=Math.exp(2*e))-1)/(e+1)}const Qu=function e(t,n,r){function o(i,s){var a=i[0],c=i[1],u=i[2],l=s[0],d=s[1],f=s[2],h=l-a,y=d-c,g=h*h+y*y,w,m;if(g<Uu)m=Math.log(f/u)/t,w=function(k){return[a+k*h,c+k*y,u*Math.exp(t*k*m)]};else{var v=Math.sqrt(g),N=(f*f-u*u+r*g)/(2*u*n*v),x=(f*f-u*u-r*g)/(2*f*n*v),A=Math.log(Math.sqrt(N*N+1)-N),C=Math.log(Math.sqrt(x*x+1)-x);m=(C-A)/t,w=function(k){var B=k*m,P=Go(A),I=u/(n*v)*(P*Ku(t*B+A)-Zu(A));return[a+I*h,c+I*y,u*P/Go(t*B+A)]}}return w.duration=m*1e3*t/Math.SQRT2,w}return o.rho=function(i){var s=Math.max(.001,+i),a=s*s,c=a*a;return e(s,a,c)},o}(Math.SQRT2,2,4);var $t=0,Ut=0,Vt=0,as=1e3,Bn,Zt,In=0,ft=0,Zn=0,on=typeof performance=="object"&&performance.now?performance:Date,cs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ro(){return ft||(cs(Ju),ft=on.now()+Zn)}function Ju(){ft=0}function zn(){this._call=this._time=this._next=null}zn.prototype=ls.prototype={constructor:zn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ro():+n)+(t==null?0:+t),!this._next&&Zt!==this&&(Zt?Zt._next=this:Bn=this,Zt=this),this._call=e,this._time=n,Dr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dr())}};function ls(e,t,n){var r=new zn;return r.restart(e,t,n),r}function ed(){ro(),++$t;for(var e=Bn,t;e;)(t=ft-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$t}function Uo(){ft=(In=on.now())+Zn,$t=Ut=0;try{ed()}finally{$t=0,nd(),ft=0}}function td(){var e=on.now(),t=e-In;t>as&&(Zn-=t,In=e)}function nd(){for(var e,t=Bn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Bn=n);Zt=e,Dr(r)}function Dr(e){if(!$t){Ut&&(Ut=clearTimeout(Ut));var t=e-ft;t>24?(e<1/0&&(Ut=setTimeout(Uo,e-on.now()-Zn)),Vt&&(Vt=clearInterval(Vt))):(Vt||(In=on.now(),Vt=setInterval(td,as)),$t=1,cs(Uo))}}function Zo(e,t,n){var r=new zn;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var rd=Gn("start","end","cancel","interrupt"),od=[],us=0,Ko=1,Hr=2,Cn=3,Qo=4,Br=5,kn=6;function Kn(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;id(e,n,{name:t,index:r,group:o,on:rd,tween:od,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:us})}function oo(e,t){var n=Me(e,t);if(n.state>us)throw new Error("too late; already scheduled");return n}function De(e,t){var n=Me(e,t);if(n.state>Cn)throw new Error("too late; already running");return n}function Me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function id(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=ls(i,0,n.time);function i(u){n.state=Ko,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,d,f,h;if(n.state!==Ko)return c();for(l in r)if(h=r[l],h.name===n.name){if(h.state===Cn)return Zo(s);h.state===Qo?(h.state=kn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[l]):+l<t&&(h.state=kn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[l])}if(Zo(function(){n.state===Cn&&(n.state=Qo,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Hr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Hr){for(n.state=Cn,o=new Array(f=n.tween.length),l=0,d=-1;l<f;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Br,1),d=-1,f=o.length;++d<f;)o[d].call(e,l);n.state===Br&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=kn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Rn(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>Hr&&r.state<Br,r.state=kn,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function sd(e){return this.each(function(){Rn(this,e)})}function ad(e,t){var n,r;return function(){var o=De(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function cd(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=De(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===t){o[c]=a;break}c===u&&o.push(a)}i.tween=o}}function ld(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Me(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?ad:cd)(n,e,t))}function io(e,t,n){var r=e._id;return e.each(function(){var o=De(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Me(o,r).value[t]}}function ds(e,t){var n;return(typeof t=="number"?Ge:t instanceof rn?Xo:(n=rn(t))?(t=n,Xo):Vu)(e,t)}function ud(e){return function(){this.removeAttribute(e)}}function dd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fd(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function hd(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function pd(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function gd(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function md(e,t){var n=Un(e),r=n==="transform"?Gu:ds;return this.attrTween(e,typeof t=="function"?(n.local?gd:pd)(n,r,io(this,"attr."+e,t)):t==null?(n.local?dd:ud)(n):(n.local?hd:fd)(n,r,t))}function yd(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function xd(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function wd(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&xd(e,i)),n}return o._value=t,o}function vd(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&yd(e,i)),n}return o._value=t,o}function bd(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Un(e);return this.tween(n,(r.local?wd:vd)(r,t))}function Sd(e,t){return function(){oo(this,e).delay=+t.apply(this,arguments)}}function _d(e,t){return t=+t,function(){oo(this,e).delay=t}}function Ed(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sd:_d)(t,e)):Me(this.node(),t).delay}function Nd(e,t){return function(){De(this,e).duration=+t.apply(this,arguments)}}function Cd(e,t){return t=+t,function(){De(this,e).duration=t}}function kd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Nd:Cd)(t,e)):Me(this.node(),t).duration}function Rd(e,t){if(typeof t!="function")throw new Error;return function(){De(this,e).ease=t}}function Td(e){var t=this._id;return arguments.length?this.each(Rd(t,e)):Me(this.node(),t).ease}function Ad(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;De(this,e).ease=n}}function Md(e){if(typeof e!="function")throw new Error;return this.each(Ad(this._id,e))}function $d(e){typeof e!="function"&&(e=ji(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Ve(r,this._parents,this._name,this._id)}function qd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var c=t[a],u=n[a],l=c.length,d=s[a]=new Array(l),f,h=0;h<l;++h)(f=c[h]||u[h])&&(d[h]=f);for(;a<r;++a)s[a]=t[a];return new Ve(s,this._parents,this._name,this._id)}function Pd(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Dd(e,t,n){var r,o,i=Pd(t)?oo:De;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}function Hd(e,t){var n=this._id;return arguments.length<2?Me(this.node(),n).on.on(e):this.each(Dd(n,e,t))}function Bd(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Id(){return this.on("end.remove",Bd(this._id))}function zd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=eo(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a=r[s],c=a.length,u=i[s]=new Array(c),l,d,f=0;f<c;++f)(l=a[f])&&(d=e.call(l,l.__data__,f,a))&&("__data__"in l&&(d.__data__=l.__data__),u[f]=d,Kn(u[f],t,n,f,u,Me(l,n)));return new Ve(i,this._parents,t,n)}function Od(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fi(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var c=r[a],u=c.length,l,d=0;d<u;++d)if(l=c[d]){for(var f=e.call(l,l.__data__,d,c),h,y=Me(l,n),g=0,w=f.length;g<w;++g)(h=f[g])&&Kn(h,t,n,g,f,y);i.push(f),s.push(l)}return new Ve(i,s,t,n)}var Ld=dn.prototype.constructor;function Fd(){return new Ld(this._groups,this._parents)}function jd(e,t){var n,r,o;return function(){var i=Mt(this,e),s=(this.style.removeProperty(e),Mt(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function fs(e){return function(){this.style.removeProperty(e)}}function Vd(e,t,n){var r,o=n+"",i;return function(){var s=Mt(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function Yd(e,t,n){var r,o,i;return function(){var s=Mt(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Mt(this,e))),s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a))}}function Xd(e,t){var n,r,o,i="style."+t,s="end."+i,a;return function(){var c=De(this,e),u=c.on,l=c.value[i]==null?a||(a=fs(t)):void 0;(u!==n||o!==l)&&(r=(n=u).copy()).on(s,o=l),c.on=r}}function Wd(e,t,n){var r=(e+="")=="transform"?Wu:ds;return t==null?this.styleTween(e,jd(e,r)).on("end.style."+e,fs(e)):typeof t=="function"?this.styleTween(e,Yd(e,r,io(this,"style."+e,t))).each(Xd(this._id,e)):this.styleTween(e,Vd(e,r,t),n).on("end.style."+e,null)}function Gd(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ud(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&Gd(e,s,n)),r}return i._value=t,i}function Zd(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ud(e,t,n??""))}function Kd(e){return function(){this.textContent=e}}function Qd(e){return function(){var t=e(this);this.textContent=t??""}}function Jd(e){return this.tween("text",typeof e=="function"?Qd(io(this,"text",e)):Kd(e==null?"":e+""))}function ef(e){return function(t){this.textContent=e.call(this,t)}}function tf(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&ef(o)),t}return r._value=e,r}function nf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,tf(e))}function rf(){for(var e=this._name,t=this._id,n=hs(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var l=Me(c,t);Kn(c,e,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ve(r,this._parents,e,n)}function of(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--o===0&&i()}};n.each(function(){var u=De(this,r),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),o===0&&i()})}var sf=0;function Ve(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function hs(){return++sf}var ze=dn.prototype;Ve.prototype={constructor:Ve,select:zd,selectAll:Od,selectChild:ze.selectChild,selectChildren:ze.selectChildren,filter:$d,merge:qd,selection:Fd,transition:rf,call:ze.call,nodes:ze.nodes,node:ze.node,size:ze.size,empty:ze.empty,each:ze.each,on:Hd,attr:md,attrTween:bd,style:Wd,styleTween:Zd,text:Jd,textTween:nf,remove:Id,tween:ld,delay:Ed,duration:kd,ease:Td,easeVarying:Md,end:of,[Symbol.iterator]:ze[Symbol.iterator]};function af(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cf={time:null,delay:0,duration:250,ease:af};function lf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function uf(e){var t,n;e instanceof Ve?(t=e._id,e=e._name):(t=hs(),(n=cf).time=ro(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&Kn(c,e,t,u,s,n||lf(c,t));return new Ve(r,this._parents,e,t)}dn.prototype.interrupt=sd;dn.prototype.transition=uf;const yn=e=>()=>e;function df(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Fe(e,t,n){this.k=e,this.x=t,this.y=n}Fe.prototype={constructor:Fe,scale:function(e){return e===1?this:new Fe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Fe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var je=new Fe(1,0,0);Fe.prototype;function wr(e){e.stopImmediatePropagation()}function Yt(e){e.preventDefault(),e.stopImmediatePropagation()}function ff(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function hf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Jo(){return this.__zoom||je}function pf(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function gf(){return navigator.maxTouchPoints||"ontouchstart"in this}function mf(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function ps(){var e=ff,t=hf,n=mf,r=pf,o=gf,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Qu,u=Gn("start","zoom","end"),l,d,f,h=500,y=150,g=0,w=10;function m(p){p.property("__zoom",Jo).on("wheel.zoom",B,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",I).filter(o).on("touchstart.zoom",H).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(p,R,_,$){var D=p.selection?p.selection():p;D.property("__zoom",Jo),p!==D?A(p,R,_,$):D.interrupt().each(function(){C(this,arguments).event($).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},m.scaleBy=function(p,R,_,$){m.scaleTo(p,function(){var D=this.__zoom.k,S=typeof R=="function"?R.apply(this,arguments):R;return D*S},_,$)},m.scaleTo=function(p,R,_,$){m.transform(p,function(){var D=t.apply(this,arguments),S=this.__zoom,q=_==null?x(D):typeof _=="function"?_.apply(this,arguments):_,b=S.invert(q),M=typeof R=="function"?R.apply(this,arguments):R;return n(N(v(S,M),q,b),D,s)},_,$)},m.translateBy=function(p,R,_,$){m.transform(p,function(){return n(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),s)},null,$)},m.translateTo=function(p,R,_,$,D){m.transform(p,function(){var S=t.apply(this,arguments),q=this.__zoom,b=$==null?x(S):typeof $=="function"?$.apply(this,arguments):$;return n(je.translate(b[0],b[1]).scale(q.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof _=="function"?-_.apply(this,arguments):-_),S,s)},$,D)};function v(p,R){return R=Math.max(i[0],Math.min(i[1],R)),R===p.k?p:new Fe(R,p.x,p.y)}function N(p,R,_){var $=R[0]-_[0]*p.k,D=R[1]-_[1]*p.k;return $===p.x&&D===p.y?p:new Fe(p.k,$,D)}function x(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function A(p,R,_,$){p.on("start.zoom",function(){C(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event($).end()}).tween("zoom",function(){var D=this,S=arguments,q=C(D,S).event($),b=t.apply(D,S),M=_==null?x(b):typeof _=="function"?_.apply(D,S):_,O=Math.max(b[1][0]-b[0][0],b[1][1]-b[0][1]),F=D.__zoom,V=typeof R=="function"?R.apply(D,S):R,W=c(F.invert(M).concat(O/F.k),V.invert(M).concat(O/V.k));return function(G){if(G===1)G=V;else{var J=W(G),Z=O/J[2];G=new Fe(Z,M[0]-J[0]*Z,M[1]-J[1]*Z)}q.zoom(null,G)}})}function C(p,R,_){return!_&&p.__zooming||new k(p,R)}function k(p,R){this.that=p,this.args=R,this.active=0,this.sourceEvent=null,this.extent=t.apply(p,R),this.taps=0}k.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,R){return this.mouse&&p!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var R=_e(this.that).datum();u.call(p,this.that,new df(p,{sourceEvent:this.sourceEvent,target:m,type:p,transform:this.that.__zoom,dispatch:u}),R)}};function B(p,...R){if(!e.apply(this,arguments))return;var _=C(this,R).event(p),$=this.__zoom,D=Math.max(i[0],Math.min(i[1],$.k*Math.pow(2,r.apply(this,arguments)))),S=ke(p);if(_.wheel)(_.mouse[0][0]!==S[0]||_.mouse[0][1]!==S[1])&&(_.mouse[1]=$.invert(_.mouse[0]=S)),clearTimeout(_.wheel);else{if($.k===D)return;_.mouse=[S,$.invert(S)],Rn(this),_.start()}Yt(p),_.wheel=setTimeout(q,y),_.zoom("mouse",n(N(v($,D),_.mouse[0],_.mouse[1]),_.extent,s));function q(){_.wheel=null,_.end()}}function P(p,...R){if(f||!e.apply(this,arguments))return;var _=p.currentTarget,$=C(this,R,!0).event(p),D=_e(p.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",O,!0),S=ke(p,_),q=p.clientX,b=p.clientY;Ji(p.view),wr(p),$.mouse=[S,this.__zoom.invert(S)],Rn(this),$.start();function M(F){if(Yt(F),!$.moved){var V=F.clientX-q,W=F.clientY-b;$.moved=V*V+W*W>g}$.event(F).zoom("mouse",n(N($.that.__zoom,$.mouse[0]=ke(F,_),$.mouse[1]),$.extent,s))}function O(F){D.on("mousemove.zoom mouseup.zoom",null),es(F.view,$.moved),Yt(F),$.event(F).end()}}function I(p,...R){if(e.apply(this,arguments)){var _=this.__zoom,$=ke(p.changedTouches?p.changedTouches[0]:p,this),D=_.invert($),S=_.k*(p.shiftKey?.5:2),q=n(N(v(_,S),$,D),t.apply(this,R),s);Yt(p),a>0?_e(this).transition().duration(a).call(A,q,$,p):_e(this).call(m.transform,q,$,p)}}function H(p,...R){if(e.apply(this,arguments)){var _=p.touches,$=_.length,D=C(this,R,p.changedTouches.length===$).event(p),S,q,b,M;for(wr(p),q=0;q<$;++q)b=_[q],M=ke(b,this),M=[M,this.__zoom.invert(M),b.identifier],D.touch0?!D.touch1&&D.touch0[2]!==M[2]&&(D.touch1=M,D.taps=0):(D.touch0=M,S=!0,D.taps=1+!!l);l&&(l=clearTimeout(l)),S&&(D.taps<2&&(d=M[0],l=setTimeout(function(){l=null},h)),Rn(this),D.start())}}function L(p,...R){if(this.__zooming){var _=C(this,R).event(p),$=p.changedTouches,D=$.length,S,q,b,M;for(Yt(p),S=0;S<D;++S)q=$[S],b=ke(q,this),_.touch0&&_.touch0[2]===q.identifier?_.touch0[0]=b:_.touch1&&_.touch1[2]===q.identifier&&(_.touch1[0]=b);if(q=_.that.__zoom,_.touch1){var O=_.touch0[0],F=_.touch0[1],V=_.touch1[0],W=_.touch1[1],G=(G=V[0]-O[0])*G+(G=V[1]-O[1])*G,J=(J=W[0]-F[0])*J+(J=W[1]-F[1])*J;q=v(q,Math.sqrt(G/J)),b=[(O[0]+V[0])/2,(O[1]+V[1])/2],M=[(F[0]+W[0])/2,(F[1]+W[1])/2]}else if(_.touch0)b=_.touch0[0],M=_.touch0[1];else return;_.zoom("touch",n(N(q,b,M),_.extent,s))}}function z(p,...R){if(this.__zooming){var _=C(this,R).event(p),$=p.changedTouches,D=$.length,S,q;for(wr(p),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),S=0;S<D;++S)q=$[S],_.touch0&&_.touch0[2]===q.identifier?delete _.touch0:_.touch1&&_.touch1[2]===q.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(q=ke(q,this),Math.hypot(d[0]-q[0],d[1]-q[1])<w)){var b=_e(this).on("dblclick.zoom");b&&b.apply(this,arguments)}}}return m.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:yn(+p),m):r},m.filter=function(p){return arguments.length?(e=typeof p=="function"?p:yn(!!p),m):e},m.touchable=function(p){return arguments.length?(o=typeof p=="function"?p:yn(!!p),m):o},m.extent=function(p){return arguments.length?(t=typeof p=="function"?p:yn([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),m):t},m.scaleExtent=function(p){return arguments.length?(i[0]=+p[0],i[1]=+p[1],m):[i[0],i[1]]},m.translateExtent=function(p){return arguments.length?(s[0][0]=+p[0][0],s[1][0]=+p[1][0],s[0][1]=+p[0][1],s[1][1]=+p[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(p){return arguments.length?(n=p,m):n},m.duration=function(p){return arguments.length?(a=+p,m):a},m.interpolate=function(p){return arguments.length?(c=p,m):c},m.on=function(){var p=u.on.apply(u,arguments);return p===u?m:p},m.clickDistance=function(p){return arguments.length?(g=(p=+p)*p,m):Math.sqrt(g)},m.tapDistance=function(p){return arguments.length?(w=+p,m):w},m}const Qn=E.createContext(null),yf=Qn.Provider,Ye={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},gs=Ye.error001();function re(e,t){const n=E.useContext(Qn);if(n===null)throw new Error(gs);return Oi(n,e,t)}const ue=()=>{const e=E.useContext(Qn);if(e===null)throw new Error(gs);return E.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},xf=e=>e.userSelectionActive?"none":"all";function Jn({position:e,children:t,className:n,style:r,...o}){const i=re(xf),s=`${e}`.split("-");return T.createElement("div",{className:he(["react-flow__panel",n,...s]),style:{...r,pointerEvents:i},...o},t)}function wf({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:T.createElement(Jn,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},T.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const vf=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...l})=>{const d=E.useRef(null),[f,h]=E.useState({x:0,y:0,width:0,height:0}),y=he(["react-flow__edge-textwrapper",u]);return E.useEffect(()=>{if(d.current){const g=d.current.getBBox();h({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:T.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:y,visibility:f.width?"visible":"hidden",...l},o&&T.createElement("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),T.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r},n),c)};var ms=E.memo(vf);const so=e=>({width:e.offsetWidth,height:e.offsetHeight}),qt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ao=(e={x:0,y:0},t)=>({x:qt(e.x,t[0][0],t[1][0]),y:qt(e.y,t[0][1],t[1][1])}),ei=(e,t,n)=>e<t?qt(Math.abs(e-t),1,50)/50:e>n?-qt(Math.abs(e-n),1,50)/50:0,ys=(e,t)=>{const n=ei(e.x,35,t.width-35)*20,r=ei(e.y,35,t.height-35)*20;return[n,r]},xs=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},ws=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),sn=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),vs=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ti=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),bf=(e,t)=>vs(ws(sn(e),sn(t))),Ir=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Sf=e=>Ee(e.width)&&Ee(e.height)&&Ee(e.x)&&Ee(e.y),Ee=e=>!isNaN(e)&&isFinite(e),se=Symbol.for("internals"),bs=["Enter"," ","Escape"],_f=(e,t)=>{},Ef=e=>"nativeEvent"in e;function zr(e){var o,i;const t=Ef(e)?e.nativeEvent:e,n=((i=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Ss=e=>"clientX"in e,Ze=(e,t)=>{var i,s;const n=Ss(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},On=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},It=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:f,interactionWidth:h=20})=>T.createElement(T.Fragment,null,T.createElement("path",{id:e,style:l,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h&&T.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),o&&Ee(n)&&Ee(r)?T.createElement(ms,{x:n,y:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);It.displayName="BaseEdge";function Xt(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(i=>i.id===e);o&&n(r,{...o})}}function _s({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[i,a,o,s]}function Es({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:a}){const c=e*.125+o*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+r*.125,l=Math.abs(c-e),d=Math.abs(u-t);return[c,u,l,d]}var ht;(function(e){e.Strict="strict",e.Loose="loose"})(ht||(ht={}));var st;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(st||(st={}));var an;(function(e){e.Partial="partial",e.Full="full"})(an||(an={}));var Le;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Le||(Le={}));var cn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(cn||(cn={}));var Y;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Y||(Y={}));function ni({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===Y.Left||e===Y.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Ns({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:i=Y.Top}){const[s,a]=ni({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,u]=ni({pos:i,x1:r,y1:o,x2:e,y2:t}),[l,d,f,h]=Es({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${a} ${c},${u} ${r},${o}`,l,d,f,h]}const co=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=Y.Bottom,targetPosition:i=Y.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:y,interactionWidth:g})=>{const[w,m,v]=Ns({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i});return T.createElement(It,{path:w,labelX:m,labelY:v,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:y,interactionWidth:g})});co.displayName="SimpleBezierEdge";const ri={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},Nf=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},oi=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Cf({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:r=Y.Top,center:o,offset:i}){const s=ri[t],a=ri[r],c={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},l=Nf({source:c,sourcePosition:t,target:u}),d=l.x!==0?"x":"y",f=l[d];let h=[],y,g;const w={x:0,y:0},m={x:0,y:0},[v,N,x,A]=_s({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){y=o.x??v,g=o.y??N;const k=[{x:y,y:c.y},{x:y,y:u.y}],B=[{x:c.x,y:g},{x:u.x,y:g}];s[d]===f?h=d==="x"?k:B:h=d==="x"?B:k}else{const k=[{x:c.x,y:u.y}],B=[{x:u.x,y:c.y}];if(d==="x"?h=s.x===f?B:k:h=s.y===f?k:B,t===r){const z=Math.abs(e[d]-n[d]);if(z<=i){const p=Math.min(i-1,i-z);s[d]===f?w[d]=(c[d]>e[d]?-1:1)*p:m[d]=(u[d]>n[d]?-1:1)*p}}if(t!==r){const z=d==="x"?"y":"x",p=s[d]===a[z],R=c[z]>u[z],_=c[z]<u[z];(s[d]===1&&(!p&&R||p&&_)||s[d]!==1&&(!p&&_||p&&R))&&(h=d==="x"?k:B)}const P={x:c.x+w.x,y:c.y+w.y},I={x:u.x+m.x,y:u.y+m.y},H=Math.max(Math.abs(P.x-h[0].x),Math.abs(I.x-h[0].x)),L=Math.max(Math.abs(P.y-h[0].y),Math.abs(I.y-h[0].y));H>=L?(y=(P.x+I.x)/2,g=h[0].y):(y=h[0].x,g=(P.y+I.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...h,{x:u.x+m.x,y:u.y+m.y},n],y,g,x,A]}function kf(e,t,n,r){const o=Math.min(oi(e,t)/2,oi(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${i+o*u},${s}Q ${i},${s} ${i},${s+o*l}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${s+o*c}Q ${i},${s} ${i+o*a},${s}`}function Or({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:i=Y.Top,borderRadius:s=5,centerX:a,centerY:c,offset:u=20}){const[l,d,f,h,y]=Cf({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:c},offset:u});return[l.reduce((w,m,v)=>{let N="";return v>0&&v<l.length-1?N=kf(l[v-1],m,l[v+1],s):N=`${v===0?"M":"L"}${m.x} ${m.y}`,w+=N,w},""),d,f,h,y]}const er=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,sourcePosition:d=Y.Bottom,targetPosition:f=Y.Top,markerEnd:h,markerStart:y,pathOptions:g,interactionWidth:w})=>{const[m,v,N]=Or({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return T.createElement(It,{path:m,labelX:v,labelY:N,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:h,markerStart:y,interactionWidth:w})});er.displayName="SmoothStepEdge";const lo=E.memo(e=>{var t;return T.createElement(er,{...e,pathOptions:E.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});lo.displayName="StepEdge";function Rf({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,a]=_s({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,a]}const uo=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:f,interactionWidth:h})=>{const[y,g,w]=Rf({sourceX:e,sourceY:t,targetX:n,targetY:r});return T.createElement(It,{path:y,labelX:g,labelY:w,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:f,interactionWidth:h})});uo.displayName="StraightEdge";function xn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ii({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case Y.Left:return[t-xn(t-r,i),n];case Y.Right:return[t+xn(r-t,i),n];case Y.Top:return[t,n-xn(n-o,i)];case Y.Bottom:return[t,n+xn(o-n,i)]}}function Cs({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:i=Y.Top,curvature:s=.25}){const[a,c]=ii({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[u,l]=ii({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[d,f,h,y]=Es({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${c} ${u},${l} ${r},${o}`,d,f,h,y]}const Ln=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=Y.Bottom,targetPosition:i=Y.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:y,pathOptions:g,interactionWidth:w})=>{const[m,v,N]=Cs({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i,curvature:g==null?void 0:g.curvature});return T.createElement(It,{path:m,labelX:v,labelY:N,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:y,interactionWidth:w})});Ln.displayName="BezierEdge";const fo=E.createContext(null),Tf=fo.Provider;fo.Consumer;const Af=()=>E.useContext(fo),Mf=e=>"id"in e&&"source"in e&&"target"in e,$f=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Lr=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,qf=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),ks=(e,t)=>{if(!e.source||!e.target)return t;let n;return Mf(e)?n={...e}:n={...e,id:$f(e)},qf(n,t)?t:t.concat(n)},Fr=({x:e,y:t},[n,r,o],i,[s,a])=>{const c={x:(e-n)/o,y:(t-r)/o};return i?{x:s*Math.round(c.x/s),y:a*Math.round(c.y/a)}:c},Rs=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),lt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},tr=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:i,y:s}=lt(o,t).positionAbsolute;return ws(r,sn({x:i,y:s,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return vs(n)},Ts=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1,a=[0,0])=>{const c={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},u=[];return e.forEach(l=>{const{width:d,height:f,selectable:h=!0,hidden:y=!1}=l;if(s&&!h||y)return!1;const{positionAbsolute:g}=lt(l,a),w={x:g.x,y:g.y,width:d||0,height:f||0},m=Ir(c,w),v=typeof d>"u"||typeof f>"u"||d===null||f===null,N=i&&m>0,x=(d||0)*(f||0);(v||N||m>=x||l.dragging)&&u.push(l)}),u},As=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Ms=(e,t,n,r,o,i=.1)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(s,a),u=qt(c,r,o),l=e.x+e.width/2,d=e.y+e.height/2,f=t/2-l*u,h=n/2-d*u;return{x:f,y:h,zoom:u}},ot=(e,t=0)=>e.transition().duration(t);function si(e,t,n,r){return(t[n]||[]).reduce((o,i)=>{var s,a;return`${e.id}-${i.id}-${n}`!==r&&o.push({id:i.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+i.x+i.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+i.y+i.height/2}),o},[])}function Pf(e,t,n,r,o,i){const{x:s,y:a}=Ze(e),u=t.elementsFromPoint(s,a).find(y=>y.classList.contains("react-flow__handle"));if(u){const y=u.getAttribute("data-nodeid");if(y){const g=ho(void 0,u),w=u.getAttribute("data-handleid"),m=i({nodeId:y,id:w,type:g});if(m){const v=o.find(N=>N.nodeId===y&&N.type===g&&N.id===w);return{handle:{id:w,type:g,nodeId:y,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:m}}}}let l=[],d=1/0;if(o.forEach(y=>{const g=Math.sqrt((y.x-n.x)**2+(y.y-n.y)**2);if(g<=r){const w=i(y);g<=d&&(g<d?l=[{handle:y,validHandleResult:w}]:g===d&&l.push({handle:y,validHandleResult:w}),d=g)}}),!l.length)return{handle:null,validHandleResult:$s()};if(l.length===1)return l[0];const f=l.some(({validHandleResult:y})=>y.isValid),h=l.some(({handle:y})=>y.type==="target");return l.find(({handle:y,validHandleResult:g})=>h?y.type==="target":f?g.isValid:!0)||l[0]}const Df={source:null,target:null,sourceHandle:null,targetHandle:null},$s=()=>({handleDomNode:null,isValid:!1,connection:Df,endHandle:null});function qs(e,t,n,r,o,i,s){const a=o==="target",c=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...$s(),handleDomNode:c};if(c){const l=ho(void 0,c),d=c.getAttribute("data-nodeid"),f=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),y=c.classList.contains("connectableend"),g={source:a?d:n,sourceHandle:a?f:r,target:a?n:d,targetHandle:a?r:f};u.connection=g,h&&y&&(t===ht.Strict?a&&l==="source"||!a&&l==="target":d!==n||f!==r)&&(u.endHandle={nodeId:d,handleId:f,type:l},u.isValid=i(g))}return u}function Hf({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,i)=>{if(i[se]){const{handleBounds:s}=i[se];let a=[],c=[];s&&(a=si(i,s,"source",`${t}-${n}-${r}`),c=si(i,s,"target",`${t}-${n}-${r}`)),o.push(...a,...c)}return o},[])}function ho(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function vr(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Bf(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Ps({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:i,setState:s,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const l=xs(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:h,connectionRadius:y,onConnectStart:g,panBy:w,getNodes:m,cancelConnection:v}=i();let N=0,x;const{x:A,y:C}=Ze(e),k=l==null?void 0:l.elementFromPoint(A,C),B=ho(c,k),P=f==null?void 0:f.getBoundingClientRect();if(!P||!B)return;let I,H=Ze(e,P),L=!1,z=null,p=!1,R=null;const _=Hf({nodes:m(),nodeId:n,handleId:t,handleType:B}),$=()=>{if(!h)return;const[q,b]=ys(H,P);w({x:q,y:b}),N=requestAnimationFrame($)};s({connectionPosition:H,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:B,connectionStartHandle:{nodeId:n,handleId:t,type:B},connectionEndHandle:null}),g==null||g(e,{nodeId:n,handleId:t,handleType:B});function D(q){const{transform:b}=i();H=Ze(q,P);const{handle:M,validHandleResult:O}=Pf(q,l,Fr(H,b,!1,[1,1]),y,_,F=>qs(F,d,n,t,o?"target":"source",a,l));if(x=M,L||($(),L=!0),R=O.handleDomNode,z=O.connection,p=O.isValid,s({connectionPosition:x&&p?Rs({x:x.x,y:x.y},b):H,connectionStatus:Bf(!!x,p),connectionEndHandle:O.endHandle}),!x&&!p&&!R)return vr(I);z.source!==z.target&&R&&(vr(I),I=R,R.classList.add("connecting","react-flow__handle-connecting"),R.classList.toggle("valid",p),R.classList.toggle("react-flow__handle-valid",p))}function S(q){var b,M;(x||R)&&z&&p&&(r==null||r(z)),(M=(b=i()).onConnectEnd)==null||M.call(b,q),c&&(u==null||u(q)),vr(I),v(),cancelAnimationFrame(N),L=!1,p=!1,z=null,R=null,l.removeEventListener("mousemove",D),l.removeEventListener("mouseup",S),l.removeEventListener("touchmove",D),l.removeEventListener("touchend",S)}l.addEventListener("mousemove",D),l.addEventListener("mouseup",S),l.addEventListener("touchmove",D),l.addEventListener("touchend",S)}const ai=()=>!0,If=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),zf=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:i,connectionClickStartHandle:s}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},Ds=E.forwardRef(({type:e="source",position:t=Y.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:c,className:u,onMouseDown:l,onTouchStart:d,...f},h)=>{var P,I;const y=s||null,g=e==="target",w=ue(),m=Af(),{connectOnClick:v,noPanClassName:N}=re(If,fe),{connecting:x,clickConnecting:A}=re(zf(m,y,e),fe);m||(I=(P=w.getState()).onError)==null||I.call(P,"010",Ye.error010());const C=H=>{const{defaultEdgeOptions:L,onConnect:z,hasDefaultEdges:p}=w.getState(),R={...L,...H};if(p){const{edges:_,setEdges:$}=w.getState();$(ks(R,_))}z==null||z(R),a==null||a(R)},k=H=>{if(!m)return;const L=Ss(H);o&&(L&&H.button===0||!L)&&Ps({event:H,handleId:y,nodeId:m,onConnect:C,isTarget:g,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||ai}),L?l==null||l(H):d==null||d(H)},B=H=>{const{onClickConnectStart:L,onClickConnectEnd:z,connectionClickStartHandle:p,connectionMode:R,isValidConnection:_}=w.getState();if(!m||!p&&!o)return;if(!p){L==null||L(H,{nodeId:m,handleId:y,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:y}});return}const $=xs(H.target),D=n||_||ai,{connection:S,isValid:q}=qs({nodeId:m,id:y,type:e},R,p.nodeId,p.handleId||null,p.type,D,$);q&&C(S),z==null||z(H),w.setState({connectionClickStartHandle:null})};return T.createElement("div",{"data-handleid":y,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${y}-${e}`,className:he(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,u,{source:!g,target:g,connectable:r,connectablestart:o,connectableend:i,connecting:A,connectionindicator:r&&(o&&!x||i&&x)}]),onMouseDown:k,onTouchStart:k,onClick:v?B:void 0,ref:h,...f},c)});Ds.displayName="Handle";var Ke=E.memo(Ds);const Hs=({data:e,isConnectable:t,targetPosition:n=Y.Top,sourcePosition:r=Y.Bottom})=>T.createElement(T.Fragment,null,T.createElement(Ke,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,T.createElement(Ke,{type:"source",position:r,isConnectable:t}));Hs.displayName="DefaultNode";var jr=E.memo(Hs);const Bs=({data:e,isConnectable:t,sourcePosition:n=Y.Bottom})=>T.createElement(T.Fragment,null,e==null?void 0:e.label,T.createElement(Ke,{type:"source",position:n,isConnectable:t}));Bs.displayName="InputNode";var Is=E.memo(Bs);const zs=({data:e,isConnectable:t,targetPosition:n=Y.Top})=>T.createElement(T.Fragment,null,T.createElement(Ke,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);zs.displayName="OutputNode";var Os=E.memo(zs);const po=()=>null;po.displayName="GroupNode";const Of=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),wn=e=>e.id;function Lf(e,t){return fe(e.selectedNodes.map(wn),t.selectedNodes.map(wn))&&fe(e.selectedEdges.map(wn),t.selectedEdges.map(wn))}const Ls=E.memo(({onSelectionChange:e})=>{const t=ue(),{selectedNodes:n,selectedEdges:r}=re(Of,Lf);return E.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(i=>i(o))},[n,r,e]),null});Ls.displayName="SelectionListener";const Ff=e=>!!e.onSelectionChange;function jf({onSelectionChange:e}){const t=re(Ff);return e||t?T.createElement(Ls,{onSelectionChange:e}):null}const Vf=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function bt(e,t){E.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function K(e,t,n){E.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Yf=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:i,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:l,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:y,minZoom:g,maxZoom:w,nodeExtent:m,onNodesChange:v,onEdgesChange:N,elementsSelectable:x,connectionMode:A,snapGrid:C,snapToGrid:k,translateExtent:B,connectOnClick:P,defaultEdgeOptions:I,fitView:H,fitViewOptions:L,onNodesDelete:z,onEdgesDelete:p,onNodeDrag:R,onNodeDragStart:_,onNodeDragStop:$,onSelectionDrag:D,onSelectionDragStart:S,onSelectionDragStop:q,noPanClassName:b,nodeOrigin:M,rfId:O,autoPanOnConnect:F,autoPanOnNodeDrag:V,onError:W,connectionRadius:G,isValidConnection:J,nodeDragThreshold:Z})=>{const{setNodes:Q,setEdges:ie,setDefaultNodesAndEdges:te,setMinZoom:ye,setMaxZoom:pe,setTranslateExtent:ae,setNodeExtent:ve,reset:ne}=re(Vf,fe),X=ue();return E.useEffect(()=>{const xe=r==null?void 0:r.map(He=>({...He,...I}));return te(n,xe),()=>{ne()}},[]),K("defaultEdgeOptions",I,X.setState),K("connectionMode",A,X.setState),K("onConnect",o,X.setState),K("onConnectStart",i,X.setState),K("onConnectEnd",s,X.setState),K("onClickConnectStart",a,X.setState),K("onClickConnectEnd",c,X.setState),K("nodesDraggable",u,X.setState),K("nodesConnectable",l,X.setState),K("nodesFocusable",d,X.setState),K("edgesFocusable",f,X.setState),K("edgesUpdatable",h,X.setState),K("elementsSelectable",x,X.setState),K("elevateNodesOnSelect",y,X.setState),K("snapToGrid",k,X.setState),K("snapGrid",C,X.setState),K("onNodesChange",v,X.setState),K("onEdgesChange",N,X.setState),K("connectOnClick",P,X.setState),K("fitViewOnInit",H,X.setState),K("fitViewOnInitOptions",L,X.setState),K("onNodesDelete",z,X.setState),K("onEdgesDelete",p,X.setState),K("onNodeDrag",R,X.setState),K("onNodeDragStart",_,X.setState),K("onNodeDragStop",$,X.setState),K("onSelectionDrag",D,X.setState),K("onSelectionDragStart",S,X.setState),K("onSelectionDragStop",q,X.setState),K("noPanClassName",b,X.setState),K("nodeOrigin",M,X.setState),K("rfId",O,X.setState),K("autoPanOnConnect",F,X.setState),K("autoPanOnNodeDrag",V,X.setState),K("onError",W,X.setState),K("connectionRadius",G,X.setState),K("isValidConnection",J,X.setState),K("nodeDragThreshold",Z,X.setState),bt(e,Q),bt(t,ie),bt(g,ye),bt(w,pe),bt(B,ae),bt(m,ve),null},ci={display:"none"},Xf={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Fs="react-flow__node-desc",js="react-flow__edge-desc",Wf="react-flow__aria-live",Gf=e=>e.ariaLiveMessage;function Uf({rfId:e}){const t=re(Gf);return T.createElement("div",{id:`${Wf}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Xf},t)}function Zf({rfId:e,disableKeyboardA11y:t}){return T.createElement(T.Fragment,null,T.createElement("div",{id:`${Fs}-${e}`,style:ci},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),T.createElement("div",{id:`${js}-${e}`,style:ci},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&T.createElement(Uf,{rfId:e}))}var ln=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=E.useState(!1),o=E.useRef(!1),i=E.useRef(new Set([])),[s,a]=E.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),l=u.reduce((d,f)=>d.concat(...f),[]);return[u,l]}return[[],[]]},[e]);return E.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const l=h=>{if(o.current=h.ctrlKey||h.metaKey||h.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&zr(h))return!1;const g=ui(h.code,a);i.current.add(h[g]),li(s,i.current,!1)&&(h.preventDefault(),r(!0))},d=h=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&zr(h))return!1;const g=ui(h.code,a);li(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(h[g]),h.key==="Meta"&&i.current.clear(),o.current=!1},f=()=>{i.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",l),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{u==null||u.removeEventListener("keydown",l),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[e,r]),n};function li(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function ui(e,t){return t.includes(e)?"code":"key"}function Vs(e,t,n,r){var a,c;const o=e.parentNode||e.parentId;if(!o)return n;const i=t.get(o),s=lt(i,r);return Vs(i,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((a=i[se])==null?void 0:a.z)??0)>(n.z??0)?((c=i[se])==null?void 0:c.z)??0:n.z??0},r)}function Ys(e,t,n){e.forEach(r=>{var i;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:s,y:a,z:c}=Vs(r,e,{...r.position,z:((i=r[se])==null?void 0:i.z)??0},t);r.positionAbsolute={x:s,y:a},r[se].z=c,n!=null&&n[r.id]&&(r[se].isParent=!0)}})}function br(e,t,n,r){const o=new Map,i={},s=r?1e3:0;return e.forEach(a=>{var h;const c=(Ee(a.zIndex)?a.zIndex:0)+(a.selected?s:0),u=t.get(a.id),l={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},d=a.parentNode||a.parentId;d&&(i[d]=!0);const f=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(l,se,{enumerable:!1,value:{handleBounds:f||(h=u==null?void 0:u[se])==null?void 0:h.handleBounds,z:c}}),o.set(a.id,l)}),Ys(o,n,i),o}function Xs(e,t={}){const{getNodes:n,width:r,height:o,minZoom:i,maxZoom:s,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:l,nodeOrigin:d}=e(),f=t.initial&&!u&&l;if(a&&c&&(f||!t.initial)){const y=n().filter(w=>{var v;const m=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return(v=t.nodes)!=null&&v.length?m&&t.nodes.some(N=>N.id===w.id):m}),g=y.every(w=>w.width&&w.height);if(y.length>0&&g){const w=tr(y,d),{x:m,y:v,zoom:N}=Ms(w,r,o,t.minZoom??i,t.maxZoom??s,t.padding??.1),x=je.translate(m,v).scale(N);return typeof t.duration=="number"&&t.duration>0?a.transform(ot(c,t.duration),x):a.transform(c,x),!0}}return!1}function Kf(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[se]:r[se],selected:n.selected})}),new Map(t)}function Qf(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function vn({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:i,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&r({nodeInternals:Kf(e,o)}),s==null||s(e)),t!=null&&t.length&&(u&&r({edges:Qf(t,i)}),a==null||a(t))}const St=()=>{},Jf={zoomIn:St,zoomOut:St,zoomTo:St,getZoom:()=>1,setViewport:St,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:St,fitBounds:St,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},eh=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),th=()=>{const e=ue(),{d3Zoom:t,d3Selection:n}=re(eh,fe);return E.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(ot(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(ot(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,i)=>t.scaleTo(ot(n,i==null?void 0:i.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,i)=>{const[s,a,c]=e.getState().transform,u=je.translate(o.x??s,o.y??a).scale(o.zoom??c);t.transform(ot(n,i==null?void 0:i.duration),u)},getViewport:()=>{const[o,i,s]=e.getState().transform;return{x:o,y:i,zoom:s}},fitView:o=>Xs(e.getState,o),setCenter:(o,i,s)=>{const{width:a,height:c,maxZoom:u}=e.getState(),l=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:u,d=a/2-o*l,f=c/2-i*l,h=je.translate(d,f).scale(l);t.transform(ot(n,s==null?void 0:s.duration),h)},fitBounds:(o,i)=>{const{width:s,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:l,y:d,zoom:f}=Ms(o,s,a,c,u,(i==null?void 0:i.padding)??.1),h=je.translate(l,d).scale(f);t.transform(ot(n,i==null?void 0:i.duration),h)},project:o=>{const{transform:i,snapToGrid:s,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Fr(o,i,s,a)},screenToFlowPosition:o=>{const{transform:i,snapToGrid:s,snapGrid:a,domNode:c}=e.getState();if(!c)return o;const{x:u,y:l}=c.getBoundingClientRect(),d={x:o.x-u,y:o.y-l};return Fr(d,i,s,a)},flowToScreenPosition:o=>{const{transform:i,domNode:s}=e.getState();if(!s)return o;const{x:a,y:c}=s.getBoundingClientRect(),u=Rs(o,i);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:Jf,[t,n])};function go(){const e=th(),t=ue(),n=E.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),r=E.useCallback(g=>t.getState().nodeInternals.get(g),[]),o=E.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(w=>({...w}))},[]),i=E.useCallback(g=>{const{edges:w=[]}=t.getState();return w.find(m=>m.id===g)},[]),s=E.useCallback(g=>{const{getNodes:w,setNodes:m,hasDefaultNodes:v,onNodesChange:N}=t.getState(),x=w(),A=typeof g=="function"?g(x):g;if(v)m(A);else if(N){const C=A.length===0?x.map(k=>({type:"remove",id:k.id})):A.map(k=>({item:k,type:"reset"}));N(C)}},[]),a=E.useCallback(g=>{const{edges:w=[],setEdges:m,hasDefaultEdges:v,onEdgesChange:N}=t.getState(),x=typeof g=="function"?g(w):g;if(v)m(x);else if(N){const A=x.length===0?w.map(C=>({type:"remove",id:C.id})):x.map(C=>({item:C,type:"reset"}));N(A)}},[]),c=E.useCallback(g=>{const w=Array.isArray(g)?g:[g],{getNodes:m,setNodes:v,hasDefaultNodes:N,onNodesChange:x}=t.getState();if(N){const C=[...m(),...w];v(C)}else if(x){const A=w.map(C=>({item:C,type:"add"}));x(A)}},[]),u=E.useCallback(g=>{const w=Array.isArray(g)?g:[g],{edges:m=[],setEdges:v,hasDefaultEdges:N,onEdgesChange:x}=t.getState();if(N)v([...m,...w]);else if(x){const A=w.map(C=>({item:C,type:"add"}));x(A)}},[]),l=E.useCallback(()=>{const{getNodes:g,edges:w=[],transform:m}=t.getState(),[v,N,x]=m;return{nodes:g().map(A=>({...A})),edges:w.map(A=>({...A})),viewport:{x:v,y:N,zoom:x}}},[]),d=E.useCallback(({nodes:g,edges:w})=>{const{nodeInternals:m,getNodes:v,edges:N,hasDefaultNodes:x,hasDefaultEdges:A,onNodesDelete:C,onEdgesDelete:k,onNodesChange:B,onEdgesChange:P}=t.getState(),I=(g||[]).map(R=>R.id),H=(w||[]).map(R=>R.id),L=v().reduce((R,_)=>{const $=_.parentNode||_.parentId,D=!I.includes(_.id)&&$&&R.find(q=>q.id===$);return(typeof _.deletable=="boolean"?_.deletable:!0)&&(I.includes(_.id)||D)&&R.push(_),R},[]),z=N.filter(R=>typeof R.deletable=="boolean"?R.deletable:!0),p=z.filter(R=>H.includes(R.id));if(L||p){const R=As(L,z),_=[...p,...R],$=_.reduce((D,S)=>(D.includes(S.id)||D.push(S.id),D),[]);if((A||x)&&(A&&t.setState({edges:N.filter(D=>!$.includes(D.id))}),x&&(L.forEach(D=>{m.delete(D.id)}),t.setState({nodeInternals:new Map(m)}))),$.length>0&&(k==null||k(_),P&&P($.map(D=>({id:D,type:"remove"})))),L.length>0&&(C==null||C(L),B)){const D=L.map(S=>({id:S.id,type:"remove"}));B(D)}}},[]),f=E.useCallback(g=>{const w=Sf(g),m=w?null:t.getState().nodeInternals.get(g.id);return!w&&!m?[null,null,w]:[w?g:ti(m),m,w]},[]),h=E.useCallback((g,w=!0,m)=>{const[v,N,x]=f(g);return v?(m||t.getState().getNodes()).filter(A=>{if(!x&&(A.id===N.id||!A.positionAbsolute))return!1;const C=ti(A),k=Ir(C,v);return w&&k>0||k>=v.width*v.height}):[]},[]),y=E.useCallback((g,w,m=!0)=>{const[v]=f(g);if(!v)return!1;const N=Ir(v,w);return m&&N>0||N>=v.width*v.height},[]);return E.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:i,setNodes:s,setEdges:a,addNodes:c,addEdges:u,toObject:l,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:y}),[e,n,r,o,i,s,a,c,u,l,d,h,y])}const nh={actInsideInputWithModifier:!1};var rh=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ue(),{deleteElements:r}=go(),o=ln(e,nh),i=ln(t);E.useEffect(()=>{if(o){const{edges:s,getNodes:a}=n.getState(),c=a().filter(l=>l.selected),u=s.filter(l=>l.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[o]),E.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function oh(e){const t=ue();E.useEffect(()=>{let n;const r=()=>{var i,s;if(!e.current)return;const o=so(e.current);(o.height===0||o.width===0)&&((s=(i=t.getState()).onError)==null||s.call(i,"004",Ye.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const mo={position:"absolute",width:"100%",height:"100%",top:0,left:0},ih=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,bn=e=>({x:e.x,y:e.y,zoom:e.k}),_t=(e,t)=>e.target.closest(`.${t}`),di=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),fi=e=>{const t=e.ctrlKey&&On()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},sh=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),ah=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=st.Free,zoomOnDoubleClick:u=!0,elementsSelectable:l,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:y,maxZoom:g,zoomActivationKeyCode:w,preventScrolling:m=!0,children:v,noWheelClassName:N,noPanClassName:x})=>{const A=E.useRef(),C=ue(),k=E.useRef(!1),B=E.useRef(!1),P=E.useRef(null),I=E.useRef({x:0,y:0,zoom:0}),{d3Zoom:H,d3Selection:L,d3ZoomHandler:z,userSelectionActive:p}=re(sh,fe),R=ln(w),_=E.useRef(0),$=E.useRef(!1),D=E.useRef();return oh(P),E.useEffect(()=>{if(P.current){const S=P.current.getBoundingClientRect(),q=ps().scaleExtent([y,g]).translateExtent(h),b=_e(P.current).call(q),M=je.translate(f.x,f.y).scale(qt(f.zoom,y,g)),O=[[0,0],[S.width,S.height]],F=q.constrain()(M,O,h);q.transform(b,F),q.wheelDelta(fi),C.setState({d3Zoom:q,d3Selection:b,d3ZoomHandler:b.on("wheel.zoom"),transform:[F.x,F.y,F.k],domNode:P.current.closest(".react-flow")})}},[]),E.useEffect(()=>{L&&H&&(s&&!R&&!p?L.on("wheel.zoom",S=>{if(_t(S,N))return!1;S.preventDefault(),S.stopImmediatePropagation();const q=L.property("__zoom").k||1;if(S.ctrlKey&&i){const J=ke(S),Z=fi(S),Q=q*Math.pow(2,Z);H.scaleTo(L,Q,J,S);return}const b=S.deltaMode===1?20:1;let M=c===st.Vertical?0:S.deltaX*b,O=c===st.Horizontal?0:S.deltaY*b;!On()&&S.shiftKey&&c!==st.Vertical&&(M=S.deltaY*b,O=0),H.translateBy(L,-(M/q)*a,-(O/q)*a,{internal:!0});const F=bn(L.property("__zoom")),{onViewportChangeStart:V,onViewportChange:W,onViewportChangeEnd:G}=C.getState();clearTimeout(D.current),$.current||($.current=!0,t==null||t(S,F),V==null||V(F)),$.current&&(e==null||e(S,F),W==null||W(F),D.current=setTimeout(()=>{n==null||n(S,F),G==null||G(F),$.current=!1},150))},{passive:!1}):typeof z<"u"&&L.on("wheel.zoom",function(S,q){if(!m&&S.type==="wheel"&&!S.ctrlKey||_t(S,N))return null;S.preventDefault(),z.call(this,S,q)},{passive:!1}))},[p,s,c,L,H,z,R,i,m,N,t,e,n]),E.useEffect(()=>{H&&H.on("start",S=>{var M,O;if(!S.sourceEvent||S.sourceEvent.internal)return null;_.current=(M=S.sourceEvent)==null?void 0:M.button;const{onViewportChangeStart:q}=C.getState(),b=bn(S.transform);k.current=!0,I.current=b,((O=S.sourceEvent)==null?void 0:O.type)==="mousedown"&&C.setState({paneDragging:!0}),q==null||q(b),t==null||t(S.sourceEvent,b)})},[H,t]),E.useEffect(()=>{H&&(p&&!k.current?H.on("zoom",null):p||H.on("zoom",S=>{var b;const{onViewportChange:q}=C.getState();if(C.setState({transform:[S.transform.x,S.transform.y,S.transform.k]}),B.current=!!(r&&di(d,_.current??0)),(e||q)&&!((b=S.sourceEvent)!=null&&b.internal)){const M=bn(S.transform);q==null||q(M),e==null||e(S.sourceEvent,M)}}))},[p,H,e,d,r]),E.useEffect(()=>{H&&H.on("end",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;const{onViewportChangeEnd:q}=C.getState();if(k.current=!1,C.setState({paneDragging:!1}),r&&di(d,_.current??0)&&!B.current&&r(S.sourceEvent),B.current=!1,(n||q)&&ih(I.current,S.transform)){const b=bn(S.transform);I.current=b,clearTimeout(A.current),A.current=setTimeout(()=>{q==null||q(b),n==null||n(S.sourceEvent,b)},s?150:0)}})},[H,s,d,n,r]),E.useEffect(()=>{H&&H.filter(S=>{const q=R||o,b=i&&S.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&S.button===1&&S.type==="mousedown"&&(_t(S,"react-flow__node")||_t(S,"react-flow__edge")))return!0;if(!d&&!q&&!s&&!u&&!i||p||!u&&S.type==="dblclick"||_t(S,N)&&S.type==="wheel"||_t(S,x)&&(S.type!=="wheel"||s&&S.type==="wheel"&&!R)||!i&&S.ctrlKey&&S.type==="wheel"||!q&&!s&&!b&&S.type==="wheel"||!d&&(S.type==="mousedown"||S.type==="touchstart")||Array.isArray(d)&&!d.includes(S.button)&&S.type==="mousedown")return!1;const M=Array.isArray(d)&&d.includes(S.button)||!S.button||S.button<=1;return(!S.ctrlKey||S.type==="wheel")&&M})},[p,H,o,i,s,u,d,l,R]),T.createElement("div",{className:"react-flow__renderer",ref:P,style:mo},v)},ch=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function lh(){const{userSelectionActive:e,userSelectionRect:t}=re(ch,fe);return e&&t?T.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function hi(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,i=t.position.y+t.height-r.height;if(o>0||i>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),i>0&&(r.style.height+=i),t.position.x<0){const s=Math.abs(t.position.x);r.position.x=r.position.x-s,r.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);r.position.y=r.position.y-s,r.style.height+=s,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Ws(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const i=e.filter(a=>a.id===o.id);if(i.length===0)return r.push(o),r;const s={...o};for(const a of i)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&hi(r,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&hi(r,s);break}case"remove":return r}return r.push(s),r},n)}function yo(e,t){return Ws(e,t)}function Gs(e,t){return Ws(e,t)}const Ue=(e,t)=>({id:e,type:"select",selected:t});function Ct(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(Ue(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(Ue(r.id,!1))),n},[])}const Sr=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},uh=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Us=E.memo(({isSelecting:e,selectionMode:t=an.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:l,children:d})=>{const f=E.useRef(null),h=ue(),y=E.useRef(0),g=E.useRef(0),w=E.useRef(),{userSelectionActive:m,elementsSelectable:v,dragging:N}=re(uh,fe),x=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,g.current=0},A=z=>{i==null||i(z),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},C=z=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){z.preventDefault();return}s==null||s(z)},k=a?z=>a(z):void 0,B=z=>{const{resetSelectedElements:p,domNode:R}=h.getState();if(w.current=R==null?void 0:R.getBoundingClientRect(),!v||!e||z.button!==0||z.target!==f.current||!w.current)return;const{x:_,y:$}=Ze(z,w.current);p(),h.setState({userSelectionRect:{width:0,height:0,startX:_,startY:$,x:_,y:$}}),r==null||r(z)},P=z=>{const{userSelectionRect:p,nodeInternals:R,edges:_,transform:$,onNodesChange:D,onEdgesChange:S,nodeOrigin:q,getNodes:b}=h.getState();if(!e||!w.current||!p)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const M=Ze(z,w.current),O=p.startX??0,F=p.startY??0,V={...p,x:M.x<O?M.x:O,y:M.y<F?M.y:F,width:Math.abs(M.x-O),height:Math.abs(M.y-F)},W=b(),G=Ts(R,V,$,t===an.Partial,!0,q),J=As(G,_).map(Q=>Q.id),Z=G.map(Q=>Q.id);if(y.current!==Z.length){y.current=Z.length;const Q=Ct(W,Z);Q.length&&(D==null||D(Q))}if(g.current!==J.length){g.current=J.length;const Q=Ct(_,J);Q.length&&(S==null||S(Q))}h.setState({userSelectionRect:V})},I=z=>{if(z.button!==0)return;const{userSelectionRect:p}=h.getState();!m&&p&&z.target===f.current&&(A==null||A(z)),h.setState({nodesSelectionActive:y.current>0}),x(),o==null||o(z)},H=z=>{m&&(h.setState({nodesSelectionActive:y.current>0}),o==null||o(z)),x()},L=v&&(e||m);return T.createElement("div",{className:he(["react-flow__pane",{dragging:N,selection:e}]),onClick:L?void 0:Sr(A,f),onContextMenu:Sr(C,f),onWheel:Sr(k,f),onMouseEnter:L?void 0:c,onMouseDown:L?B:void 0,onMouseMove:L?P:u,onMouseUp:L?I:void 0,onMouseLeave:L?H:l,ref:f,style:mo},d,T.createElement(lh,null))});Us.displayName="Pane";function Zs(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Zs(r,t):!1}function pi(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function dh(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!Zs(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var i,s;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=o.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((s=o.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function fh(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Ks(e,t,n,r,o=[0,0],i){const s=fh(e,e.extent||r);let a=s;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const d=n.get(c),{x:f,y:h}=lt(d,o).positionAbsolute;a=d&&Ee(f)&&Ee(h)&&Ee(d.width)&&Ee(d.height)?[[f+e.width*o[0],h+e.height*o[1]],[f+d.width-e.width+e.width*o[0],h+d.height-e.height+e.height*o[1]]]:a}else i==null||i("005",Ye.error005()),a=s;else if(e.extent&&c&&e.extent!=="parent"){const d=n.get(c),{x:f,y:h}=lt(d,o).positionAbsolute;a=[[e.extent[0][0]+f,e.extent[0][1]+h],[e.extent[1][0]+f,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const d=n.get(c);u=lt(d,o).positionAbsolute}const l=a&&a!=="parent"?ao(t,a):t;return{position:{x:l.x-u.x,y:l.y-u.y},positionAbsolute:l}}function _r({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const gi=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const i=Array.from(o),s=t.getBoundingClientRect(),a={x:s.width*r[0],y:s.height*r[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-s.left-a.x)/n,y:(u.top-s.top-a.y)/n,...so(c)}})};function Wt(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function Vr({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Ye.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var l;return(l=r==null?void 0:r.current)==null?void 0:l.blur()})):o([e])}function hh(){const e=ue();return E.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:i}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(s-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:i?o[0]*Math.round(c.x/o[0]):c.x,ySnapped:i?o[1]*Math.round(c.y/o[1]):c.y,...c}},[])}function Er(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Qs({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,selectNodesOnDrag:s}){const a=ue(),[c,u]=E.useState(!1),l=E.useRef([]),d=E.useRef({x:null,y:null}),f=E.useRef(0),h=E.useRef(null),y=E.useRef({x:0,y:0}),g=E.useRef(null),w=E.useRef(!1),m=E.useRef(!1),v=E.useRef(!1),N=hh();return E.useEffect(()=>{if(e!=null&&e.current){const x=_e(e.current),A=({x:B,y:P})=>{const{nodeInternals:I,onNodeDrag:H,onSelectionDrag:L,updateNodePositions:z,nodeExtent:p,snapGrid:R,snapToGrid:_,nodeOrigin:$,onError:D}=a.getState();d.current={x:B,y:P};let S=!1,q={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&p){const M=tr(l.current,$);q=sn(M)}if(l.current=l.current.map(M=>{const O={x:B-M.distance.x,y:P-M.distance.y};_&&(O.x=R[0]*Math.round(O.x/R[0]),O.y=R[1]*Math.round(O.y/R[1]));const F=[[p[0][0],p[0][1]],[p[1][0],p[1][1]]];l.current.length>1&&p&&!M.extent&&(F[0][0]=M.positionAbsolute.x-q.x+p[0][0],F[1][0]=M.positionAbsolute.x+(M.width??0)-q.x2+p[1][0],F[0][1]=M.positionAbsolute.y-q.y+p[0][1],F[1][1]=M.positionAbsolute.y+(M.height??0)-q.y2+p[1][1]);const V=Ks(M,O,I,F,$,D);return S=S||M.position.x!==V.position.x||M.position.y!==V.position.y,M.position=V.position,M.positionAbsolute=V.positionAbsolute,M}),!S)return;z(l.current,!0,!0),u(!0);const b=o?H:Er(L);if(b&&g.current){const[M,O]=_r({nodeId:o,dragItems:l.current,nodeInternals:I});b(g.current,M,O)}},C=()=>{if(!h.current)return;const[B,P]=ys(y.current,h.current);if(B!==0||P!==0){const{transform:I,panBy:H}=a.getState();d.current.x=(d.current.x??0)-B/I[2],d.current.y=(d.current.y??0)-P/I[2],H({x:B,y:P})&&A(d.current)}f.current=requestAnimationFrame(C)},k=B=>{var $;const{nodeInternals:P,multiSelectionActive:I,nodesDraggable:H,unselectNodesAndEdges:L,onNodeDragStart:z,onSelectionDragStart:p}=a.getState();m.current=!0;const R=o?z:Er(p);(!s||!i)&&!I&&o&&(($=P.get(o))!=null&&$.selected||L()),o&&i&&s&&Vr({id:o,store:a,nodeRef:e});const _=N(B);if(d.current=_,l.current=dh(P,H,_,o),R&&l.current){const[D,S]=_r({nodeId:o,dragItems:l.current,nodeInternals:P});R(B.sourceEvent,D,S)}};if(t)x.on(".drag",null);else{const B=Cu().on("start",P=>{const{domNode:I,nodeDragThreshold:H}=a.getState();H===0&&k(P),v.current=!1;const L=N(P);d.current=L,h.current=(I==null?void 0:I.getBoundingClientRect())||null,y.current=Ze(P.sourceEvent,h.current)}).on("drag",P=>{var z,p;const I=N(P),{autoPanOnNodeDrag:H,nodeDragThreshold:L}=a.getState();if(P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1&&(v.current=!0),!v.current){if(!w.current&&m.current&&H&&(w.current=!0,C()),!m.current){const R=I.xSnapped-(((z=d==null?void 0:d.current)==null?void 0:z.x)??0),_=I.ySnapped-(((p=d==null?void 0:d.current)==null?void 0:p.y)??0);Math.sqrt(R*R+_*_)>L&&k(P)}(d.current.x!==I.xSnapped||d.current.y!==I.ySnapped)&&l.current&&m.current&&(g.current=P.sourceEvent,y.current=Ze(P.sourceEvent,h.current),A(I))}}).on("end",P=>{if(!(!m.current||v.current)&&(u(!1),w.current=!1,m.current=!1,cancelAnimationFrame(f.current),l.current)){const{updateNodePositions:I,nodeInternals:H,onNodeDragStop:L,onSelectionDragStop:z}=a.getState(),p=o?L:Er(z);if(I(l.current,!1,!1),p){const[R,_]=_r({nodeId:o,dragItems:l.current,nodeInternals:H});p(P.sourceEvent,R,_)}}}).filter(P=>{const I=P.target;return!P.button&&(!n||!pi(I,`.${n}`,e))&&(!r||pi(I,r,e))});return x.call(B),()=>{x.on(".drag",null)}}}},[e,t,n,r,i,a,o,s,N]),c}function Js(){const e=ue();return E.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:i,getNodes:s,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:l}=e.getState(),d=s().filter(v=>v.selected&&(v.draggable||l&&typeof v.draggable>"u")),f=a?c[0]:5,h=a?c[1]:5,y=n.isShiftPressed?4:1,g=n.x*f*y,w=n.y*h*y,m=d.map(v=>{if(v.positionAbsolute){const N={x:v.positionAbsolute.x+g,y:v.positionAbsolute.y+w};a&&(N.x=c[0]*Math.round(N.x/c[0]),N.y=c[1]*Math.round(N.y/c[1]));const{positionAbsolute:x,position:A}=Ks(v,N,r,o,void 0,u);v.position=A,v.positionAbsolute=x}return v});i(m,!0,!1)},[])}const At={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Gt=e=>{const t=({id:n,type:r,data:o,xPos:i,yPos:s,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:l,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onContextMenu:y,onDoubleClick:g,style:w,className:m,isDraggable:v,isSelectable:N,isConnectable:x,isFocusable:A,selectNodesOnDrag:C,sourcePosition:k,targetPosition:B,hidden:P,resizeObserver:I,dragHandle:H,zIndex:L,isParent:z,noDragClassName:p,noPanClassName:R,initialized:_,disableKeyboardA11y:$,ariaLabel:D,rfId:S,hasHandleBounds:q})=>{const b=ue(),M=E.useRef(null),O=E.useRef(null),F=E.useRef(k),V=E.useRef(B),W=E.useRef(r),G=N||v||l||d||f||h,J=Js(),Z=Wt(n,b.getState,d),Q=Wt(n,b.getState,f),ie=Wt(n,b.getState,h),te=Wt(n,b.getState,y),ye=Wt(n,b.getState,g),pe=ne=>{const{nodeDragThreshold:X}=b.getState();if(N&&(!C||!v||X>0)&&Vr({id:n,store:b,nodeRef:M}),l){const xe=b.getState().nodeInternals.get(n);xe&&l(ne,{...xe})}},ae=ne=>{if(!zr(ne)&&!$)if(bs.includes(ne.key)&&N){const X=ne.key==="Escape";Vr({id:n,store:b,unselect:X,nodeRef:M})}else v&&u&&Object.prototype.hasOwnProperty.call(At,ne.key)&&(b.setState({ariaLiveMessage:`Moved selected node ${ne.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),J({x:At[ne.key].x,y:At[ne.key].y,isShiftPressed:ne.shiftKey}))};E.useEffect(()=>()=>{O.current&&(I==null||I.unobserve(O.current),O.current=null)},[]),E.useEffect(()=>{if(M.current&&!P){const ne=M.current;(!_||!q||O.current!==ne)&&(O.current&&(I==null||I.unobserve(O.current)),I==null||I.observe(ne),O.current=ne)}},[P,_,q]),E.useEffect(()=>{const ne=W.current!==r,X=F.current!==k,xe=V.current!==B;M.current&&(ne||X||xe)&&(ne&&(W.current=r),X&&(F.current=k),xe&&(V.current=B),b.getState().updateNodeDimensions([{id:n,nodeElement:M.current,forceUpdate:!0}]))},[n,r,k,B]);const ve=Qs({nodeRef:M,disabled:P||!v,noDragClassName:p,handleSelector:H,nodeId:n,isSelectable:N,selectNodesOnDrag:C});return P?null:T.createElement("div",{className:he(["react-flow__node",`react-flow__node-${r}`,{[R]:v},m,{selected:u,selectable:N,parent:z,dragging:ve}]),ref:M,style:{zIndex:L,transform:`translate(${a}px,${c}px)`,pointerEvents:G?"all":"none",visibility:_?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Z,onMouseMove:Q,onMouseLeave:ie,onContextMenu:te,onClick:pe,onDoubleClick:ye,onKeyDown:A?ae:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":$?void 0:`${Fs}-${S}`,"aria-label":D},T.createElement(Tf,{value:n},T.createElement(e,{id:n,data:o,type:r,xPos:i,yPos:s,selected:u,isConnectable:x,sourcePosition:k,targetPosition:B,dragging:ve,dragHandle:H,zIndex:L})))};return t.displayName="NodeWrapper",E.memo(t)};const ph=e=>{const t=e.getNodes().filter(n=>n.selected);return{...tr(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function gh({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ue(),{width:o,height:i,x:s,y:a,transformString:c,userSelectionActive:u}=re(ph,fe),l=Js(),d=E.useRef(null);if(E.useEffect(()=>{var y;n||(y=d.current)==null||y.focus({preventScroll:!0})},[n]),Qs({nodeRef:d}),u||!o||!i)return null;const f=e?y=>{const g=r.getState().getNodes().filter(w=>w.selected);e(y,g)}:void 0,h=y=>{Object.prototype.hasOwnProperty.call(At,y.key)&&l({x:At[y.key].x,y:At[y.key].y,isShiftPressed:y.shiftKey})};return T.createElement("div",{className:he(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},T.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:o,height:i,top:a,left:s}}))}var mh=E.memo(gh);const yh=e=>e.nodesSelectionActive,ea=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:l,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:y,onSelectionEnd:g,multiSelectionKeyCode:w,panActivationKeyCode:m,zoomActivationKeyCode:v,elementsSelectable:N,zoomOnScroll:x,zoomOnPinch:A,panOnScroll:C,panOnScrollSpeed:k,panOnScrollMode:B,zoomOnDoubleClick:P,panOnDrag:I,defaultViewport:H,translateExtent:L,minZoom:z,maxZoom:p,preventScrolling:R,onSelectionContextMenu:_,noWheelClassName:$,noPanClassName:D,disableKeyboardA11y:S})=>{const q=re(yh),b=ln(d),M=ln(m),O=M||I,F=M||C,V=b||f&&O!==!0;return rh({deleteKeyCode:a,multiSelectionKeyCode:w}),T.createElement(ah,{onMove:c,onMoveStart:u,onMoveEnd:l,onPaneContextMenu:i,elementsSelectable:N,zoomOnScroll:x,zoomOnPinch:A,panOnScroll:F,panOnScrollSpeed:k,panOnScrollMode:B,zoomOnDoubleClick:P,panOnDrag:!b&&O,defaultViewport:H,translateExtent:L,minZoom:z,maxZoom:p,zoomActivationKeyCode:v,preventScrolling:R,noWheelClassName:$,noPanClassName:D},T.createElement(Us,{onSelectionStart:y,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:O,isSelecting:!!V,selectionMode:h},e,q&&T.createElement(mh,{onSelectionContextMenu:_,noPanClassName:D,disableKeyboardA11y:S})))};ea.displayName="FlowRenderer";var xh=E.memo(ea);function wh(e){return re(E.useCallback(n=>e?Ts(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function vh(e){const t={input:Gt(e.input||Is),default:Gt(e.default||jr),output:Gt(e.output||Os),group:Gt(e.group||po)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,i)=>(o[i]=Gt(e[i]||jr),o),n);return{...t,...r}}const bh=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},Sh=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ta=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:i,onError:s}=re(Sh,fe),a=wh(e.onlyRenderVisibleElements),c=E.useRef(),u=E.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(d=>{const f=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));i(f)});return c.current=l,l},[]);return E.useEffect(()=>()=>{var l;(l=c==null?void 0:c.current)==null||l.disconnect()},[]),T.createElement("div",{className:"react-flow__nodes",style:mo},a.map(l=>{var A,C,k;let d=l.type||"default";e.nodeTypes[d]||(s==null||s("003",Ye.error003(d)),d="default");const f=e.nodeTypes[d]||e.nodeTypes.default,h=!!(l.draggable||t&&typeof l.draggable>"u"),y=!!(l.selectable||o&&typeof l.selectable>"u"),g=!!(l.connectable||n&&typeof l.connectable>"u"),w=!!(l.focusable||r&&typeof l.focusable>"u"),m=e.nodeExtent?ao(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,v=(m==null?void 0:m.x)??0,N=(m==null?void 0:m.y)??0,x=bh({x:v,y:N,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return T.createElement(f,{key:l.id,id:l.id,className:l.className,style:l.style,type:d,data:l.data,sourcePosition:l.sourcePosition||Y.Bottom,targetPosition:l.targetPosition||Y.Top,hidden:l.hidden,xPos:v,yPos:N,xPosOrigin:x.x,yPosOrigin:x.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:h,isSelectable:y,isConnectable:g,isFocusable:w,resizeObserver:u,dragHandle:l.dragHandle,zIndex:((A=l[se])==null?void 0:A.z)??0,isParent:!!((C=l[se])!=null&&C.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel,hasHandleBounds:!!((k=l[se])!=null&&k.handleBounds)})}))};ta.displayName="NodeRenderer";var _h=E.memo(ta);const Eh=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,Nh=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,mi="react-flow__edgeupdater",yi=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:a})=>T.createElement("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:he([mi,`${mi}-${a}`]),cx:Eh(t,r,e),cy:Nh(n,r,e),r,stroke:"transparent",fill:"transparent"}),Ch=()=>!0;var Et=e=>{const t=({id:n,className:r,type:o,data:i,onClick:s,onEdgeDoubleClick:a,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:y,labelBgBorderRadius:g,style:w,source:m,target:v,sourceX:N,sourceY:x,targetX:A,targetY:C,sourcePosition:k,targetPosition:B,elementsSelectable:P,hidden:I,sourceHandleId:H,targetHandleId:L,onContextMenu:z,onMouseEnter:p,onMouseMove:R,onMouseLeave:_,reconnectRadius:$,onReconnect:D,onReconnectStart:S,onReconnectEnd:q,markerEnd:b,markerStart:M,rfId:O,ariaLabel:F,isFocusable:V,isReconnectable:W,pathOptions:G,interactionWidth:J,disableKeyboardA11y:Z})=>{const Q=E.useRef(null),[ie,te]=E.useState(!1),[ye,pe]=E.useState(!1),ae=ue(),ve=E.useMemo(()=>`url('#${Lr(M,O)}')`,[M,O]),ne=E.useMemo(()=>`url('#${Lr(b,O)}')`,[b,O]);if(I)return null;const X=ge=>{var $e;const{edges:Ce,addSelectedEdges:et,unselectNodesAndEdges:tt,multiSelectionActive:nt}=ae.getState(),Ie=Ce.find(Ft=>Ft.id===n);Ie&&(P&&(ae.setState({nodesSelectionActive:!1}),Ie.selected&&nt?(tt({nodes:[],edges:[Ie]}),($e=Q.current)==null||$e.blur()):et([n])),s&&s(ge,Ie))},xe=Xt(n,ae.getState,a),He=Xt(n,ae.getState,z),Ot=Xt(n,ae.getState,p),mt=Xt(n,ae.getState,R),yt=Xt(n,ae.getState,_),Be=(ge,Ce)=>{if(ge.button!==0)return;const{edges:et,isValidConnection:tt}=ae.getState(),nt=Ce?v:m,Ie=(Ce?L:H)||null,$e=Ce?"target":"source",Ft=tt||Ch,lr=Ce,jt=et.find(rt=>rt.id===n);pe(!0),S==null||S(ge,jt,$e);const ur=rt=>{pe(!1),q==null||q(rt,jt,$e)};Ps({event:ge,handleId:Ie,nodeId:nt,onConnect:rt=>D==null?void 0:D(jt,rt),isTarget:lr,getState:ae.getState,setState:ae.setState,isValidConnection:Ft,edgeUpdaterType:$e,onReconnectEnd:ur})},xt=ge=>Be(ge,!0),Qe=ge=>Be(ge,!1),Je=()=>te(!0),wt=()=>te(!1),vt=!P&&!s,Lt=ge=>{var Ce;if(!Z&&bs.includes(ge.key)&&P){const{unselectNodesAndEdges:et,addSelectedEdges:tt,edges:nt}=ae.getState();ge.key==="Escape"?((Ce=Q.current)==null||Ce.blur(),et({edges:[nt.find($e=>$e.id===n)]})):tt([n])}};return T.createElement("g",{className:he(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:c,animated:u,inactive:vt,updating:ie}]),onClick:X,onDoubleClick:xe,onContextMenu:He,onMouseEnter:Ot,onMouseMove:mt,onMouseLeave:yt,onKeyDown:V?Lt:void 0,tabIndex:V?0:void 0,role:V?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":F===null?void 0:F||`Edge from ${m} to ${v}`,"aria-describedby":V?`${js}-${O}`:void 0,ref:Q},!ye&&T.createElement(e,{id:n,source:m,target:v,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:y,labelBgBorderRadius:g,data:i,style:w,sourceX:N,sourceY:x,targetX:A,targetY:C,sourcePosition:k,targetPosition:B,sourceHandleId:H,targetHandleId:L,markerStart:ve,markerEnd:ne,pathOptions:G,interactionWidth:J}),W&&T.createElement(T.Fragment,null,(W==="source"||W===!0)&&T.createElement(yi,{position:k,centerX:N,centerY:x,radius:$,onMouseDown:xt,onMouseEnter:Je,onMouseOut:wt,type:"source"}),(W==="target"||W===!0)&&T.createElement(yi,{position:B,centerX:A,centerY:C,radius:$,onMouseDown:Qe,onMouseEnter:Je,onMouseOut:wt,type:"target"})))};return t.displayName="EdgeWrapper",E.memo(t)};function kh(e){const t={default:Et(e.default||Ln),straight:Et(e.bezier||uo),step:Et(e.step||lo),smoothstep:Et(e.step||er),simplebezier:Et(e.simplebezier||co)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,i)=>(o[i]=Et(e[i]||Ln),o),n);return{...t,...r}}function xi(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case Y.Top:return{x:r+i/2,y:o};case Y.Right:return{x:r+i,y:o+s/2};case Y.Bottom:return{x:r+i/2,y:o+s};case Y.Left:return{x:r,y:o+s/2}}}function wi(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Rh=(e,t,n,r,o,i)=>{const s=xi(n,e,t),a=xi(i,r,o);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function Th({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:i,width:s,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const l=sn({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:a/c[2]}),d=Math.max(0,Math.min(l.x2,u.x2)-Math.max(l.x,u.x)),f=Math.max(0,Math.min(l.y2,u.y2)-Math.max(l.y,u.y));return Math.ceil(d*f)>0}function vi(e){var r,o,i,s,a;const t=((r=e==null?void 0:e[se])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Ah=[{level:0,isMaxLevel:!0,edges:[]}];function Mh(e,t,n=!1){let r=-1;const o=e.reduce((s,a)=>{var l,d;const c=Ee(a.zIndex);let u=c?a.zIndex:0;if(n){const f=t.get(a.target),h=t.get(a.source),y=a.selected||(f==null?void 0:f.selected)||(h==null?void 0:h.selected),g=Math.max(((l=h==null?void 0:h[se])==null?void 0:l.z)||0,((d=f==null?void 0:f[se])==null?void 0:d.z)||0,1e3);u=(c?a.zIndex:0)+(y?g:0)}return s[u]?s[u].push(a):s[u]=[a],r=u>r?u:r,s},{}),i=Object.entries(o).map(([s,a])=>{const c=+s;return{edges:a,level:c,isMaxLevel:c===r}});return i.length===0?Ah:i}function $h(e,t,n){const r=re(E.useCallback(o=>e?o.edges.filter(i=>{const s=t.get(i.source),a=t.get(i.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Th({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return Mh(r,t,n)}const qh=({color:e="none",strokeWidth:t=1})=>T.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Ph=({color:e="none",strokeWidth:t=1})=>T.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),bi={[cn.Arrow]:qh,[cn.ArrowClosed]:Ph};function Dh(e){const t=ue();return E.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(bi,e)?bi[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",Ye.error009(e)),null)},[e])}const Hh=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const c=Dh(t);return c?T.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0"},T.createElement(c,{color:n,strokeWidth:s})):null},Bh=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=Lr(s,t);r.includes(a)||(o.push({id:a,color:s.color||e,...s}),r.push(a))}}),o),[]).sort((o,i)=>o.id.localeCompare(i.id))},na=({defaultColor:e,rfId:t})=>{const n=re(E.useCallback(Bh({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((i,s)=>i.id!==o[s].id)));return T.createElement("defs",null,n.map(r=>T.createElement(Hh,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};na.displayName="MarkerDefinitions";var Ih=E.memo(na);const zh=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),ra=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:l,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:y,reconnectRadius:g,children:w,disableKeyboardA11y:m})=>{const{edgesFocusable:v,edgesUpdatable:N,elementsSelectable:x,width:A,height:C,connectionMode:k,nodeInternals:B,onError:P}=re(zh,fe),I=$h(t,B,n);return A?T.createElement(T.Fragment,null,I.map(({level:H,edges:L,isMaxLevel:z})=>T.createElement("svg",{key:H,style:{zIndex:H},width:A,height:C,className:"react-flow__edges react-flow__container"},z&&T.createElement(Ih,{defaultColor:e,rfId:r}),T.createElement("g",null,L.map(p=>{const[R,_,$]=vi(B.get(p.source)),[D,S,q]=vi(B.get(p.target));if(!$||!q)return null;let b=p.type||"default";o[b]||(P==null||P("011",Ye.error011(b)),b="default");const M=o[b]||o.default,O=k===ht.Strict?S.target:(S.target??[]).concat(S.source??[]),F=wi(_.source,p.sourceHandle),V=wi(O,p.targetHandle),W=(F==null?void 0:F.position)||Y.Bottom,G=(V==null?void 0:V.position)||Y.Top,J=!!(p.focusable||v&&typeof p.focusable>"u"),Z=p.reconnectable||p.updatable,Q=typeof f<"u"&&(Z||N&&typeof Z>"u");if(!F||!V)return P==null||P("008",Ye.error008(F,p)),null;const{sourceX:ie,sourceY:te,targetX:ye,targetY:pe}=Rh(R,F,W,D,V,G);return T.createElement(M,{key:p.id,id:p.id,className:he([p.className,i]),type:b,data:p.data,selected:!!p.selected,animated:!!p.animated,hidden:!!p.hidden,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,style:p.style,source:p.source,target:p.target,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerEnd:p.markerEnd,markerStart:p.markerStart,sourceX:ie,sourceY:te,targetX:ye,targetY:pe,sourcePosition:W,targetPosition:G,elementsSelectable:x,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:l,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:y,reconnectRadius:g,rfId:r,ariaLabel:p.ariaLabel,isFocusable:J,isReconnectable:Q,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth,disableKeyboardA11y:m})})))),w):null};ra.displayName="EdgeRenderer";var Oh=E.memo(ra);const Lh=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Fh({children:e}){const t=re(Lh);return T.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function jh(e){const t=go(),n=E.useRef(!1);E.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Vh={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},oa=({nodeId:e,handleType:t,style:n,type:r=Le.Bezier,CustomComponent:o,connectionStatus:i})=>{var C,k,B;const{fromNode:s,handleId:a,toX:c,toY:u,connectionMode:l}=re(E.useCallback(P=>({fromNode:P.nodeInternals.get(e),handleId:P.connectionHandleId,toX:(P.connectionPosition.x-P.transform[0])/P.transform[2],toY:(P.connectionPosition.y-P.transform[1])/P.transform[2],connectionMode:P.connectionMode}),[e]),fe),d=(C=s==null?void 0:s[se])==null?void 0:C.handleBounds;let f=d==null?void 0:d[t];if(l===ht.Loose&&(f=f||(d==null?void 0:d[t==="source"?"target":"source"])),!s||!f)return null;const h=a?f.find(P=>P.id===a):f[0],y=h?h.x+h.width/2:(s.width??0)/2,g=h?h.y+h.height/2:s.height??0,w=(((k=s.positionAbsolute)==null?void 0:k.x)??0)+y,m=(((B=s.positionAbsolute)==null?void 0:B.y)??0)+g,v=h==null?void 0:h.position,N=v?Vh[v]:null;if(!v||!N)return null;if(o)return T.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:h,fromX:w,fromY:m,toX:c,toY:u,fromPosition:v,toPosition:N,connectionStatus:i});let x="";const A={sourceX:w,sourceY:m,sourcePosition:v,targetX:c,targetY:u,targetPosition:N};return r===Le.Bezier?[x]=Cs(A):r===Le.Step?[x]=Or({...A,borderRadius:0}):r===Le.SmoothStep?[x]=Or(A):r===Le.SimpleBezier?[x]=Ns(A):x=`M${w},${m} ${c},${u}`,T.createElement("path",{d:x,fill:"none",className:"react-flow__connection-path",style:n})};oa.displayName="ConnectionLine";const Yh=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Xh({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:i,nodesConnectable:s,width:a,height:c,connectionStatus:u}=re(Yh,fe);return!(o&&i&&a&&s)?null:T.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},T.createElement("g",{className:he(["react-flow__connection",u])},T.createElement(oa,{nodeId:o,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function Si(e,t){return E.useRef(null),ue(),E.useMemo(()=>t(e),[e])}const ia=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:i,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:y,onSelectionStart:g,onSelectionEnd:w,connectionLineType:m,connectionLineStyle:v,connectionLineComponent:N,connectionLineContainerStyle:x,selectionKeyCode:A,selectionOnDrag:C,selectionMode:k,multiSelectionKeyCode:B,panActivationKeyCode:P,zoomActivationKeyCode:I,deleteKeyCode:H,onlyRenderVisibleElements:L,elementsSelectable:z,selectNodesOnDrag:p,defaultViewport:R,translateExtent:_,minZoom:$,maxZoom:D,preventScrolling:S,defaultMarkerColor:q,zoomOnScroll:b,zoomOnPinch:M,panOnScroll:O,panOnScrollSpeed:F,panOnScrollMode:V,zoomOnDoubleClick:W,panOnDrag:G,onPaneClick:J,onPaneMouseEnter:Z,onPaneMouseMove:Q,onPaneMouseLeave:ie,onPaneScroll:te,onPaneContextMenu:ye,onEdgeContextMenu:pe,onEdgeMouseEnter:ae,onEdgeMouseMove:ve,onEdgeMouseLeave:ne,onReconnect:X,onReconnectStart:xe,onReconnectEnd:He,reconnectRadius:Ot,noDragClassName:mt,noWheelClassName:yt,noPanClassName:Be,elevateEdgesOnSelect:xt,disableKeyboardA11y:Qe,nodeOrigin:Je,nodeExtent:wt,rfId:vt})=>{const Lt=Si(e,vh),ge=Si(t,kh);return jh(i),T.createElement(xh,{onPaneClick:J,onPaneMouseEnter:Z,onPaneMouseMove:Q,onPaneMouseLeave:ie,onPaneContextMenu:ye,onPaneScroll:te,deleteKeyCode:H,selectionKeyCode:A,selectionOnDrag:C,selectionMode:k,onSelectionStart:g,onSelectionEnd:w,multiSelectionKeyCode:B,panActivationKeyCode:P,zoomActivationKeyCode:I,elementsSelectable:z,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:b,zoomOnPinch:M,zoomOnDoubleClick:W,panOnScroll:O,panOnScrollSpeed:F,panOnScrollMode:V,panOnDrag:G,defaultViewport:R,translateExtent:_,minZoom:$,maxZoom:D,onSelectionContextMenu:y,preventScrolling:S,noDragClassName:mt,noWheelClassName:yt,noPanClassName:Be,disableKeyboardA11y:Qe},T.createElement(Fh,null,T.createElement(Oh,{edgeTypes:ge,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:L,onEdgeContextMenu:pe,onEdgeMouseEnter:ae,onEdgeMouseMove:ve,onEdgeMouseLeave:ne,onReconnect:X,onReconnectStart:xe,onReconnectEnd:He,reconnectRadius:Ot,defaultMarkerColor:q,noPanClassName:Be,elevateEdgesOnSelect:!!xt,disableKeyboardA11y:Qe,rfId:vt},T.createElement(Xh,{style:v,type:m,component:N,containerStyle:x})),T.createElement("div",{className:"react-flow__edgelabel-renderer"}),T.createElement(_h,{nodeTypes:Lt,onNodeClick:s,onNodeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:p,onlyRenderVisibleElements:L,noPanClassName:Be,noDragClassName:mt,disableKeyboardA11y:Qe,nodeOrigin:Je,nodeExtent:wt,rfId:vt})))};ia.displayName="GraphView";var Wh=E.memo(ia);const Yr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Xe={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Yr,nodeExtent:Yr,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ht.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:_f,isValidConnection:void 0},Gh=()=>Ic((e,t)=>({...Xe,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:i}=t();e({nodeInternals:br(n,r,o,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",i=typeof r<"u",s=o?br(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:i?r:[],hasDefaultNodes:o,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),l=c==null?void 0:c.querySelector(".react-flow__viewport");if(!l)return;const d=window.getComputedStyle(l),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((g,w)=>{const m=o.get(w.id);if(m!=null&&m.hidden)o.set(m.id,{...m,[se]:{...m[se],handleBounds:void 0}});else if(m){const v=so(w.nodeElement);!!(v.width&&v.height&&(m.width!==v.width||m.height!==v.height||w.forceUpdate))&&(o.set(m.id,{...m,[se]:{...m[se],handleBounds:{source:gi(".source",w.nodeElement,f,u),target:gi(".target",w.nodeElement,f,u)}},...v}),g.push({id:m.id,type:"dimensions",dimensions:v}))}return g},[]);Ys(o,u);const y=s||i&&!s&&Xs(t,{initial:!0,...a});e({nodeInternals:new Map(o),fitViewOnInitDone:y}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:i}=t(),s=n.map(a=>{const c={id:a.id,type:"position",dragging:o};return r&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});i(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:i,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(i){const u=yo(n,a()),l=br(u,o,s,c);e({nodeInternals:l})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,a=null;r?s=n.map(c=>Ue(c,!0)):(s=Ct(i(),n),a=Ct(o,[])),vn({changedNodes:s,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,a=null;r?s=n.map(c=>Ue(c,!0)):(s=Ct(o,n),a=Ct(i(),[])),vn({changedNodes:a,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:i}=t(),s=n||i(),a=r||o,c=s.map(l=>(l.selected=!1,Ue(l.id,!1))),u=a.map(l=>Ue(l.id,!1));vn({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),i=r().filter(a=>a.selected).map(a=>Ue(a.id,!1)),s=n.filter(a=>a.selected).map(a=>Ue(a.id,!1));vn({changedNodes:i,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=ao(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:i,d3Zoom:s,d3Selection:a,translateExtent:c}=t();if(!s||!a||!n.x&&!n.y)return!1;const u=je.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),l=[[0,0],[o,i]],d=s==null?void 0:s.constrain()(u,l,c);return s.transform(a,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Xe.connectionNodeId,connectionHandleId:Xe.connectionHandleId,connectionHandleType:Xe.connectionHandleType,connectionStatus:Xe.connectionStatus,connectionStartHandle:Xe.connectionStartHandle,connectionEndHandle:Xe.connectionEndHandle}),reset:()=>e({...Xe})}),Object.is),xo=({children:e})=>{const t=E.useRef(null);return t.current||(t.current=Gh()),T.createElement(yf,{value:t.current},e)};xo.displayName="ReactFlowProvider";const sa=({children:e})=>E.useContext(Qn)?T.createElement(T.Fragment,null,e):T.createElement(xo,null,e);sa.displayName="ReactFlowWrapper";const Uh={input:Is,default:jr,output:Os,group:po},Zh={default:Ln,straight:uo,step:lo,smoothstep:er,simplebezier:co},Kh=[0,0],Qh=[15,15],Jh={x:0,y:0,zoom:1},ep={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},aa=E.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i=Uh,edgeTypes:s=Zh,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:l,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:y,onConnectEnd:g,onClickConnectStart:w,onClickConnectEnd:m,onNodeMouseEnter:v,onNodeMouseMove:N,onNodeMouseLeave:x,onNodeContextMenu:A,onNodeDoubleClick:C,onNodeDragStart:k,onNodeDrag:B,onNodeDragStop:P,onNodesDelete:I,onEdgesDelete:H,onSelectionChange:L,onSelectionDragStart:z,onSelectionDrag:p,onSelectionDragStop:R,onSelectionContextMenu:_,onSelectionStart:$,onSelectionEnd:D,connectionMode:S=ht.Strict,connectionLineType:q=Le.Bezier,connectionLineStyle:b,connectionLineComponent:M,connectionLineContainerStyle:O,deleteKeyCode:F="Backspace",selectionKeyCode:V="Shift",selectionOnDrag:W=!1,selectionMode:G=an.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:Z=On()?"Meta":"Control",zoomActivationKeyCode:Q=On()?"Meta":"Control",snapToGrid:ie=!1,snapGrid:te=Qh,onlyRenderVisibleElements:ye=!1,selectNodesOnDrag:pe=!0,nodesDraggable:ae,nodesConnectable:ve,nodesFocusable:ne,nodeOrigin:X=Kh,edgesFocusable:xe,edgesUpdatable:He,elementsSelectable:Ot,defaultViewport:mt=Jh,minZoom:yt=.5,maxZoom:Be=2,translateExtent:xt=Yr,preventScrolling:Qe=!0,nodeExtent:Je,defaultMarkerColor:wt="#b1b1b7",zoomOnScroll:vt=!0,zoomOnPinch:Lt=!0,panOnScroll:ge=!1,panOnScrollSpeed:Ce=.5,panOnScrollMode:et=st.Free,zoomOnDoubleClick:tt=!0,panOnDrag:nt=!0,onPaneClick:Ie,onPaneMouseEnter:$e,onPaneMouseMove:Ft,onPaneMouseLeave:lr,onPaneScroll:jt,onPaneContextMenu:ur,children:Co,onEdgeContextMenu:rt,onEdgeDoubleClick:Ya,onEdgeMouseEnter:Xa,onEdgeMouseMove:Wa,onEdgeMouseLeave:Ga,onEdgeUpdate:Ua,onEdgeUpdateStart:Za,onEdgeUpdateEnd:Ka,onReconnect:Qa,onReconnectStart:Ja,onReconnectEnd:ec,reconnectRadius:tc=10,edgeUpdaterRadius:nc=10,onNodesChange:rc,onEdgesChange:oc,noDragClassName:ic="nodrag",noWheelClassName:sc="nowheel",noPanClassName:ko="nopan",fitView:ac=!1,fitViewOptions:cc,connectOnClick:lc=!0,attributionPosition:uc,proOptions:dc,defaultEdgeOptions:fc,elevateNodesOnSelect:hc=!0,elevateEdgesOnSelect:pc=!1,disableKeyboardA11y:Ro=!1,autoPanOnConnect:gc=!0,autoPanOnNodeDrag:mc=!0,connectionRadius:yc=20,isValidConnection:xc,onError:wc,style:vc,id:To,nodeDragThreshold:bc,...Sc},_c)=>{const dr=To||"1";return T.createElement("div",{...Sc,style:{...vc,...ep},ref:_c,className:he(["react-flow",o]),"data-testid":"rf__wrapper",id:To},T.createElement(sa,null,T.createElement(Wh,{onInit:u,onMove:l,onMoveStart:d,onMoveEnd:f,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:v,onNodeMouseMove:N,onNodeMouseLeave:x,onNodeContextMenu:A,onNodeDoubleClick:C,nodeTypes:i,edgeTypes:s,connectionLineType:q,connectionLineStyle:b,connectionLineComponent:M,connectionLineContainerStyle:O,selectionKeyCode:V,selectionOnDrag:W,selectionMode:G,deleteKeyCode:F,multiSelectionKeyCode:Z,panActivationKeyCode:J,zoomActivationKeyCode:Q,onlyRenderVisibleElements:ye,selectNodesOnDrag:pe,defaultViewport:mt,translateExtent:xt,minZoom:yt,maxZoom:Be,preventScrolling:Qe,zoomOnScroll:vt,zoomOnPinch:Lt,zoomOnDoubleClick:tt,panOnScroll:ge,panOnScrollSpeed:Ce,panOnScrollMode:et,panOnDrag:nt,onPaneClick:Ie,onPaneMouseEnter:$e,onPaneMouseMove:Ft,onPaneMouseLeave:lr,onPaneScroll:jt,onPaneContextMenu:ur,onSelectionContextMenu:_,onSelectionStart:$,onSelectionEnd:D,onEdgeContextMenu:rt,onEdgeDoubleClick:Ya,onEdgeMouseEnter:Xa,onEdgeMouseMove:Wa,onEdgeMouseLeave:Ga,onReconnect:Qa??Ua,onReconnectStart:Ja??Za,onReconnectEnd:ec??Ka,reconnectRadius:tc??nc,defaultMarkerColor:wt,noDragClassName:ic,noWheelClassName:sc,noPanClassName:ko,elevateEdgesOnSelect:pc,rfId:dr,disableKeyboardA11y:Ro,nodeOrigin:X,nodeExtent:Je}),T.createElement(Yf,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:y,onConnectEnd:g,onClickConnectStart:w,onClickConnectEnd:m,nodesDraggable:ae,nodesConnectable:ve,nodesFocusable:ne,edgesFocusable:xe,edgesUpdatable:He,elementsSelectable:Ot,elevateNodesOnSelect:hc,minZoom:yt,maxZoom:Be,nodeExtent:Je,onNodesChange:rc,onEdgesChange:oc,snapToGrid:ie,snapGrid:te,connectionMode:S,translateExtent:xt,connectOnClick:lc,defaultEdgeOptions:fc,fitView:ac,fitViewOptions:cc,onNodesDelete:I,onEdgesDelete:H,onNodeDragStart:k,onNodeDrag:B,onNodeDragStop:P,onSelectionDrag:p,onSelectionDragStart:z,onSelectionDragStop:R,noPanClassName:ko,nodeOrigin:X,rfId:dr,autoPanOnConnect:gc,autoPanOnNodeDrag:mc,onError:wc,connectionRadius:yc,isValidConnection:xc,nodeDragThreshold:bc}),T.createElement(jf,{onSelectionChange:L}),Co,T.createElement(wf,{proOptions:dc,position:uc}),T.createElement(Zf,{rfId:dr,disableKeyboardA11y:Ro})))});aa.displayName="ReactFlow";function ca(e){return t=>{const[n,r]=E.useState(t),o=E.useCallback(i=>r(s=>e(i,s)),[]);return[n,r,o]}}const tp=ca(yo),np=ca(Gs),la=({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:a,strokeWidth:c,className:u,borderRadius:l,shapeRendering:d,onClick:f,selected:h})=>{const{background:y,backgroundColor:g}=i||{},w=s||y||g;return T.createElement("rect",{className:he(["react-flow__minimap-node",{selected:h},u]),x:t,y:n,rx:l,ry:l,width:r,height:o,fill:w,stroke:a,strokeWidth:c,shapeRendering:d,onClick:f?m=>f(m,e):void 0})};la.displayName="MiniMapNode";var rp=E.memo(la);const op=e=>e.nodeOrigin,ip=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Nr=e=>e instanceof Function?e:()=>e;function sp({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:i=rp,onClick:s}){const a=re(ip,fe),c=re(op),u=Nr(t),l=Nr(e),d=Nr(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return T.createElement(T.Fragment,null,a.map(h=>{const{x:y,y:g}=lt(h,c).positionAbsolute;return T.createElement(i,{key:h.id,x:y,y:g,width:h.width,height:h.height,style:h.style,selected:h.selected,className:d(h),color:u(h),borderRadius:r,strokeColor:l(h),strokeWidth:o,shapeRendering:f,onClick:s,id:h.id})}))}var ap=E.memo(sp);const cp=200,lp=150,up=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?bf(tr(t,e.nodeOrigin),n):n,rfId:e.rfId}},dp="react-flow__minimap-desc";function ua({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:a,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:l=1,position:d="bottom-right",onClick:f,onNodeClick:h,pannable:y=!1,zoomable:g=!1,ariaLabel:w="React Flow mini map",inversePan:m=!1,zoomStep:v=10,offsetScale:N=5}){const x=ue(),A=E.useRef(null),{boundingRect:C,viewBB:k,rfId:B}=re(up,fe),P=(e==null?void 0:e.width)??cp,I=(e==null?void 0:e.height)??lp,H=C.width/P,L=C.height/I,z=Math.max(H,L),p=z*P,R=z*I,_=N*z,$=C.x-(p-C.width)/2-_,D=C.y-(R-C.height)/2-_,S=p+_*2,q=R+_*2,b=`${dp}-${B}`,M=E.useRef(0);M.current=z,E.useEffect(()=>{if(A.current){const V=_e(A.current),W=Z=>{const{transform:Q,d3Selection:ie,d3Zoom:te}=x.getState();if(Z.sourceEvent.type!=="wheel"||!ie||!te)return;const ye=-Z.sourceEvent.deltaY*(Z.sourceEvent.deltaMode===1?.05:Z.sourceEvent.deltaMode?1:.002)*v,pe=Q[2]*Math.pow(2,ye);te.scaleTo(ie,pe)},G=Z=>{const{transform:Q,d3Selection:ie,d3Zoom:te,translateExtent:ye,width:pe,height:ae}=x.getState();if(Z.sourceEvent.type!=="mousemove"||!ie||!te)return;const ve=M.current*Math.max(1,Q[2])*(m?-1:1),ne={x:Q[0]-Z.sourceEvent.movementX*ve,y:Q[1]-Z.sourceEvent.movementY*ve},X=[[0,0],[pe,ae]],xe=je.translate(ne.x,ne.y).scale(Q[2]),He=te.constrain()(xe,X,ye);te.transform(ie,He)},J=ps().on("zoom",y?G:null).on("zoom.wheel",g?W:null);return V.call(J),()=>{V.on("zoom",null)}}},[y,g,m,v]);const O=f?V=>{const W=ke(V);f(V,{x:W[0],y:W[1]})}:void 0,F=h?(V,W)=>{const G=x.getState().nodeInternals.get(W);h(V,G)}:void 0;return T.createElement(Jn,{position:d,style:e,className:he(["react-flow__minimap",t]),"data-testid":"rf__minimap"},T.createElement("svg",{width:P,height:I,viewBox:`${$} ${D} ${S} ${q}`,role:"img","aria-labelledby":b,ref:A,onClick:O},w&&T.createElement("title",{id:b},w),T.createElement(ap,{onClick:F,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:a}),T.createElement("path",{className:"react-flow__minimap-mask",d:`M${$-_},${D-_}h${S+_*2}v${q+_*2}h${-S-_*2}z
        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:l,pointerEvents:"none"})))}ua.displayName="MiniMap";var fp=E.memo(ua);function hp(){return T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},T.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function pp(){return T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},T.createElement("path",{d:"M0 0h32v4.2H0z"}))}function gp(){return T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},T.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function mp(){return T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},T.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function yp(){return T.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},T.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Kt=({children:e,className:t,...n})=>T.createElement("button",{type:"button",className:he(["react-flow__controls-button",t]),...n},e);Kt.displayName="ControlButton";const xp=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),da=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:c,className:u,children:l,position:d="bottom-left"})=>{const f=ue(),[h,y]=E.useState(!1),{isInteractive:g,minZoomReached:w,maxZoomReached:m}=re(xp,fe),{zoomIn:v,zoomOut:N,fitView:x}=go();if(E.useEffect(()=>{y(!0)},[]),!h)return null;const A=()=>{v(),i==null||i()},C=()=>{N(),s==null||s()},k=()=>{x(o),a==null||a()},B=()=>{f.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),c==null||c(!g)};return T.createElement(Jn,{className:he(["react-flow__controls",u]),position:d,style:e,"data-testid":"rf__controls"},t&&T.createElement(T.Fragment,null,T.createElement(Kt,{onClick:A,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},T.createElement(hp,null)),T.createElement(Kt,{onClick:C,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},T.createElement(pp,null))),n&&T.createElement(Kt,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},T.createElement(gp,null)),r&&T.createElement(Kt,{className:"react-flow__controls-interactive",onClick:B,title:"toggle interactivity","aria-label":"toggle interactivity"},g?T.createElement(yp,null):T.createElement(mp,null)),l)};da.displayName="Controls";var wp=E.memo(da),Te;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Te||(Te={}));function vp({color:e,dimensions:t,lineWidth:n}){return T.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function bp({color:e,radius:t}){return T.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Sp={[Te.Dots]:"#91919a",[Te.Lines]:"#eee",[Te.Cross]:"#e2e2e2"},_p={[Te.Dots]:1,[Te.Lines]:1,[Te.Cross]:6},Ep=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function fa({id:e,variant:t=Te.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=2,color:s,style:a,className:c}){const u=E.useRef(null),{transform:l,patternId:d}=re(Ep,fe),f=s||Sp[t],h=r||_p[t],y=t===Te.Dots,g=t===Te.Cross,w=Array.isArray(n)?n:[n,n],m=[w[0]*l[2]||1,w[1]*l[2]||1],v=h*l[2],N=g?[v,v]:m,x=y?[v/i,v/i]:[N[0]/i,N[1]/i];return T.createElement("svg",{className:he(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},T.createElement("pattern",{id:d+e,x:l[0]%m[0],y:l[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`},y?T.createElement(bp,{color:f,radius:v/i}):T.createElement(vp,{dimensions:N,color:f,lineWidth:o})),T.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}fa.displayName="Background";var Np=E.memo(fa),me=function(){return me=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},me.apply(this,arguments)};function Fn(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var oe="-ms-",Jt="-moz-",ee="-webkit-",ha="comm",nr="rule",wo="decl",Cp="@import",pa="@keyframes",kp="@layer",ga=Math.abs,vo=String.fromCharCode,Xr=Object.assign;function Rp(e,t){return de(e,0)^45?(((t<<2^de(e,0))<<2^de(e,1))<<2^de(e,2))<<2^de(e,3):0}function ma(e){return e.trim()}function Oe(e,t){return(e=t.exec(e))?e[0]:e}function U(e,t,n){return e.replace(t,n)}function Tn(e,t,n){return e.indexOf(t,n)}function de(e,t){return e.charCodeAt(t)|0}function Pt(e,t,n){return e.slice(t,n)}function qe(e){return e.length}function ya(e){return e.length}function Qt(e,t){return t.push(e),e}function Tp(e,t){return e.map(t).join("")}function _i(e,t){return e.filter(function(n){return!Oe(n,t)})}var rr=1,Dt=1,xa=0,Ne=0,le=0,zt="";function or(e,t,n,r,o,i,s,a){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:rr,column:Dt,length:s,return:"",siblings:a}}function We(e,t){return Xr(or("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Nt(e){for(;e.root;)e=We(e.root,{children:[e]});Qt(e,e.siblings)}function Ap(){return le}function Mp(){return le=Ne>0?de(zt,--Ne):0,Dt--,le===10&&(Dt=1,rr--),le}function Ae(){return le=Ne<xa?de(zt,Ne++):0,Dt++,le===10&&(Dt=1,rr++),le}function ut(){return de(zt,Ne)}function An(){return Ne}function ir(e,t){return Pt(zt,e,t)}function Wr(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $p(e){return rr=Dt=1,xa=qe(zt=e),Ne=0,[]}function qp(e){return zt="",e}function Cr(e){return ma(ir(Ne-1,Gr(e===91?e+2:e===40?e+1:e)))}function Pp(e){for(;(le=ut())&&le<33;)Ae();return Wr(e)>2||Wr(le)>3?"":" "}function Dp(e,t){for(;--t&&Ae()&&!(le<48||le>102||le>57&&le<65||le>70&&le<97););return ir(e,An()+(t<6&&ut()==32&&Ae()==32))}function Gr(e){for(;Ae();)switch(le){case e:return Ne;case 34:case 39:e!==34&&e!==39&&Gr(le);break;case 40:e===41&&Gr(e);break;case 92:Ae();break}return Ne}function Hp(e,t){for(;Ae()&&e+le!==57;)if(e+le===84&&ut()===47)break;return"/*"+ir(t,Ne-1)+"*"+vo(e===47?e:Ae())}function Bp(e){for(;!Wr(ut());)Ae();return ir(e,Ne)}function Ip(e){return qp(Mn("",null,null,null,[""],e=$p(e),0,[0],e))}function Mn(e,t,n,r,o,i,s,a,c){for(var u=0,l=0,d=s,f=0,h=0,y=0,g=1,w=1,m=1,v=0,N="",x=o,A=i,C=r,k=N;w;)switch(y=v,v=Ae()){case 40:if(y!=108&&de(k,d-1)==58){Tn(k+=U(Cr(v),"&","&\f"),"&\f",ga(u?a[u-1]:0))!=-1&&(m=-1);break}case 34:case 39:case 91:k+=Cr(v);break;case 9:case 10:case 13:case 32:k+=Pp(y);break;case 92:k+=Dp(An()-1,7);continue;case 47:switch(ut()){case 42:case 47:Qt(zp(Hp(Ae(),An()),t,n,c),c);break;default:k+="/"}break;case 123*g:a[u++]=qe(k)*m;case 125*g:case 59:case 0:switch(v){case 0:case 125:w=0;case 59+l:m==-1&&(k=U(k,/\f/g,"")),h>0&&qe(k)-d&&Qt(h>32?Ni(k+";",r,n,d-1,c):Ni(U(k," ","")+";",r,n,d-2,c),c);break;case 59:k+=";";default:if(Qt(C=Ei(k,t,n,u,l,o,a,N,x=[],A=[],d,i),i),v===123)if(l===0)Mn(k,t,C,C,x,i,d,a,A);else switch(f===99&&de(k,3)===110?100:f){case 100:case 108:case 109:case 115:Mn(e,C,C,r&&Qt(Ei(e,C,C,0,0,o,a,N,o,x=[],d,A),A),o,A,d,a,r?x:A);break;default:Mn(k,C,C,C,[""],A,0,a,A)}}u=l=h=0,g=m=1,N=k="",d=s;break;case 58:d=1+qe(k),h=y;default:if(g<1){if(v==123)--g;else if(v==125&&g++==0&&Mp()==125)continue}switch(k+=vo(v),v*g){case 38:m=l>0?1:(k+="\f",-1);break;case 44:a[u++]=(qe(k)-1)*m,m=1;break;case 64:ut()===45&&(k+=Cr(Ae())),f=ut(),l=d=qe(N=k+=Bp(An())),v++;break;case 45:y===45&&qe(k)==2&&(g=0)}}return i}function Ei(e,t,n,r,o,i,s,a,c,u,l,d){for(var f=o-1,h=o===0?i:[""],y=ya(h),g=0,w=0,m=0;g<r;++g)for(var v=0,N=Pt(e,f+1,f=ga(w=s[g])),x=e;v<y;++v)(x=ma(w>0?h[v]+" "+N:U(N,/&\f/g,h[v])))&&(c[m++]=x);return or(e,t,n,o===0?nr:a,c,u,l,d)}function zp(e,t,n,r){return or(e,t,n,ha,vo(Ap()),Pt(e,2,-2),0,r)}function Ni(e,t,n,r,o){return or(e,t,n,wo,Pt(e,0,r),Pt(e,r+1,-1),r,o)}function wa(e,t,n){switch(Rp(e,t)){case 5103:return ee+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ee+e+e;case 4789:return Jt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ee+e+Jt+e+oe+e+e;case 5936:switch(de(e,t+11)){case 114:return ee+e+oe+U(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ee+e+oe+U(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ee+e+oe+U(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return ee+e+oe+e+e;case 6165:return ee+e+oe+"flex-"+e+e;case 5187:return ee+e+U(e,/(\w+).+(:[^]+)/,ee+"box-$1$2"+oe+"flex-$1$2")+e;case 5443:return ee+e+oe+"flex-item-"+U(e,/flex-|-self/g,"")+(Oe(e,/flex-|baseline/)?"":oe+"grid-row-"+U(e,/flex-|-self/g,""))+e;case 4675:return ee+e+oe+"flex-line-pack"+U(e,/align-content|flex-|-self/g,"")+e;case 5548:return ee+e+oe+U(e,"shrink","negative")+e;case 5292:return ee+e+oe+U(e,"basis","preferred-size")+e;case 6060:return ee+"box-"+U(e,"-grow","")+ee+e+oe+U(e,"grow","positive")+e;case 4554:return ee+U(e,/([^-])(transform)/g,"$1"+ee+"$2")+e;case 6187:return U(U(U(e,/(zoom-|grab)/,ee+"$1"),/(image-set)/,ee+"$1"),e,"")+e;case 5495:case 3959:return U(e,/(image-set\([^]*)/,ee+"$1$`$1");case 4968:return U(U(e,/(.+:)(flex-)?(.*)/,ee+"box-pack:$3"+oe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ee+e+e;case 4200:if(!Oe(e,/flex-|baseline/))return oe+"grid-column-align"+Pt(e,t)+e;break;case 2592:case 3360:return oe+U(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(r,o){return t=o,Oe(r.props,/grid-\w+-end/)})?~Tn(e+(n=n[t].value),"span",0)?e:oe+U(e,"-start","")+e+oe+"grid-row-span:"+(~Tn(n,"span",0)?Oe(n,/\d+/):+Oe(n,/\d+/)-+Oe(e,/\d+/))+";":oe+U(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(r){return Oe(r.props,/grid-\w+-start/)})?e:oe+U(U(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return U(e,/(.+)-inline(.+)/,ee+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(qe(e)-1-t>6)switch(de(e,t+1)){case 109:if(de(e,t+4)!==45)break;case 102:return U(e,/(.+:)(.+)-([^]+)/,"$1"+ee+"$2-$3$1"+Jt+(de(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Tn(e,"stretch",0)?wa(U(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return U(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,o,i,s,a,c,u){return oe+o+":"+i+u+(s?oe+o+"-span:"+(a?c:+c-+i)+u:"")+e});case 4949:if(de(e,t+6)===121)return U(e,":",":"+ee)+e;break;case 6444:switch(de(e,de(e,14)===45?18:11)){case 120:return U(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ee+(de(e,14)===45?"inline-":"")+"box$3$1"+ee+"$2$3$1"+oe+"$2box$3")+e;case 100:return U(e,":",":"+oe)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return U(e,"scroll-","scroll-snap-")+e}return e}function jn(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function Op(e,t,n,r){switch(e.type){case kp:if(e.children.length)break;case Cp:case wo:return e.return=e.return||e.value;case ha:return"";case pa:return e.return=e.value+"{"+jn(e.children,r)+"}";case nr:if(!qe(e.value=e.props.join(",")))return""}return qe(n=jn(e.children,r))?e.return=e.value+"{"+n+"}":""}function Lp(e){var t=ya(e);return function(n,r,o,i){for(var s="",a=0;a<t;a++)s+=e[a](n,r,o,i)||"";return s}}function Fp(e){return function(t){t.root||(t=t.return)&&e(t)}}function jp(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case wo:e.return=wa(e.value,e.length,n);return;case pa:return jn([We(e,{value:U(e.value,"@","@"+ee)})],r);case nr:if(e.length)return Tp(n=e.props,function(o){switch(Oe(o,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Nt(We(e,{props:[U(o,/:(read-\w+)/,":"+Jt+"$1")]})),Nt(We(e,{props:[o]})),Xr(e,{props:_i(n,r)});break;case"::placeholder":Nt(We(e,{props:[U(o,/:(plac\w+)/,":"+ee+"input-$1")]})),Nt(We(e,{props:[U(o,/:(plac\w+)/,":"+Jt+"$1")]})),Nt(We(e,{props:[U(o,/:(plac\w+)/,oe+"input-$1")]})),Nt(We(e,{props:[o]})),Xr(e,{props:_i(n,r)});break}return""})}}var Vp={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},be={},Ht=typeof process<"u"&&be!==void 0&&(be.REACT_APP_SC_ATTR||be.SC_ATTR)||"data-styled",va="active",ba="data-styled-version",sr="6.1.13",bo=`/*!sc*/
`,Vn=typeof window<"u"&&"HTMLElement"in window,Yp=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&be!==void 0&&be.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&be.REACT_APP_SC_DISABLE_SPEEDY!==""?be.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&be.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&be!==void 0&&be.SC_DISABLE_SPEEDY!==void 0&&be.SC_DISABLE_SPEEDY!==""&&be.SC_DISABLE_SPEEDY!=="false"&&be.SC_DISABLE_SPEEDY),ar=Object.freeze([]),Bt=Object.freeze({});function Xp(e,t,n){return n===void 0&&(n=Bt),e.theme!==n.theme&&e.theme||t||n.theme}var Sa=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Wp=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Gp=/(^-|-$)/g;function Ci(e){return e.replace(Wp,"-").replace(Gp,"")}var Up=/(a)(d)/gi,Sn=52,ki=function(e){return String.fromCharCode(e+(e>25?39:97))};function Ur(e){var t,n="";for(t=Math.abs(e);t>Sn;t=t/Sn|0)n=ki(t%Sn)+n;return(ki(t%Sn)+n).replace(Up,"$1-$2")}var kr,_a=5381,kt=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Ea=function(e){return kt(_a,e)};function Zp(e){return Ur(Ea(e)>>>0)}function Kp(e){return e.displayName||e.name||"Component"}function Rr(e){return typeof e=="string"&&!0}var Na=typeof Symbol=="function"&&Symbol.for,Ca=Na?Symbol.for("react.memo"):60115,Qp=Na?Symbol.for("react.forward_ref"):60112,Jp={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},eg={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ka={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},tg=((kr={})[Qp]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kr[Ca]=ka,kr);function Ri(e){return("type"in(t=e)&&t.type.$$typeof)===Ca?ka:"$$typeof"in e?tg[e.$$typeof]:Jp;var t}var ng=Object.defineProperty,rg=Object.getOwnPropertyNames,Ti=Object.getOwnPropertySymbols,og=Object.getOwnPropertyDescriptor,ig=Object.getPrototypeOf,Ai=Object.prototype;function Ra(e,t,n){if(typeof t!="string"){if(Ai){var r=ig(t);r&&r!==Ai&&Ra(e,r,n)}var o=rg(t);Ti&&(o=o.concat(Ti(t)));for(var i=Ri(e),s=Ri(t),a=0;a<o.length;++a){var c=o[a];if(!(c in eg||n&&n[c]||s&&c in s||i&&c in i)){var u=og(t,c);try{ng(e,c,u)}catch{}}}}return e}function pt(e){return typeof e=="function"}function So(e){return typeof e=="object"&&"styledComponentId"in e}function at(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Mi(e,t){if(e.length===0)return"";for(var n=e[0],r=1;r<e.length;r++)n+=e[r];return n}function un(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Zr(e,t,n){if(n===void 0&&(n=!1),!n&&!un(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=Zr(e[r],t[r]);else if(un(t))for(var r in t)e[r]=Zr(e[r],t[r]);return e}function _o(e,t){Object.defineProperty(e,"toString",{value:t})}function gt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var sg=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var n=0,r=0;r<t;r++)n+=this.groupSizes[r];return n},e.prototype.insertRules=function(t,n){if(t>=this.groupSizes.length){for(var r=this.groupSizes,o=r.length,i=o;t>=i;)if((i<<=1)<0)throw gt(16,"".concat(t));this.groupSizes=new Uint32Array(i),this.groupSizes.set(r),this.length=i;for(var s=o;s<i;s++)this.groupSizes[s]=0}for(var a=this.indexOfGroup(t+1),c=(s=0,n.length);s<c;s++)this.tag.insertRule(a,n[s])&&(this.groupSizes[t]++,a++)},e.prototype.clearGroup=function(t){if(t<this.length){var n=this.groupSizes[t],r=this.indexOfGroup(t),o=r+n;this.groupSizes[t]=0;for(var i=r;i<o;i++)this.tag.deleteRule(r)}},e.prototype.getGroup=function(t){var n="";if(t>=this.length||this.groupSizes[t]===0)return n;for(var r=this.groupSizes[t],o=this.indexOfGroup(t),i=o+r,s=o;s<i;s++)n+="".concat(this.tag.getRule(s)).concat(bo);return n},e}(),$n=new Map,Yn=new Map,qn=1,_n=function(e){if($n.has(e))return $n.get(e);for(;Yn.has(qn);)qn++;var t=qn++;return $n.set(e,t),Yn.set(t,e),t},ag=function(e,t){qn=t+1,$n.set(e,t),Yn.set(t,e)},cg="style[".concat(Ht,"][").concat(ba,'="').concat(sr,'"]'),lg=new RegExp("^".concat(Ht,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),ug=function(e,t,n){for(var r,o=n.split(","),i=0,s=o.length;i<s;i++)(r=o[i])&&e.registerName(t,r)},dg=function(e,t){for(var n,r=((n=t.textContent)!==null&&n!==void 0?n:"").split(bo),o=[],i=0,s=r.length;i<s;i++){var a=r[i].trim();if(a){var c=a.match(lg);if(c){var u=0|parseInt(c[1],10),l=c[2];u!==0&&(ag(l,u),ug(e,l,c[3]),e.getTag().insertRules(u,o)),o.length=0}else o.push(a)}}},$i=function(e){for(var t=document.querySelectorAll(cg),n=0,r=t.length;n<r;n++){var o=t[n];o&&o.getAttribute(Ht)!==va&&(dg(e,o),o.parentNode&&o.parentNode.removeChild(o))}};function fg(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Ta=function(e){var t=document.head,n=e||t,r=document.createElement("style"),o=function(a){var c=Array.from(a.querySelectorAll("style[".concat(Ht,"]")));return c[c.length-1]}(n),i=o!==void 0?o.nextSibling:null;r.setAttribute(Ht,va),r.setAttribute(ba,sr);var s=fg();return s&&r.setAttribute("nonce",s),n.insertBefore(r,i),r},hg=function(){function e(t){this.element=Ta(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,o=0,i=r.length;o<i;o++){var s=r[o];if(s.ownerNode===n)return s}throw gt(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,n){try{return this.sheet.insertRule(n,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var n=this.sheet.cssRules[t];return n&&n.cssText?n.cssText:""},e}(),pg=function(){function e(t){this.element=Ta(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,n){if(t<=this.length&&t>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),gg=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,n){return t<=this.length&&(this.rules.splice(t,0,n),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),qi=Vn,mg={isServer:!Vn,useCSSOMInjection:!Yp},Aa=function(){function e(t,n,r){t===void 0&&(t=Bt),n===void 0&&(n={});var o=this;this.options=me(me({},mg),t),this.gs=n,this.names=new Map(r),this.server=!!t.isServer,!this.server&&Vn&&qi&&(qi=!1,$i(this)),_o(this,function(){return function(i){for(var s=i.getTag(),a=s.length,c="",u=function(d){var f=function(m){return Yn.get(m)}(d);if(f===void 0)return"continue";var h=i.names.get(f),y=s.getGroup(d);if(h===void 0||!h.size||y.length===0)return"continue";var g="".concat(Ht,".g").concat(d,'[id="').concat(f,'"]'),w="";h!==void 0&&h.forEach(function(m){m.length>0&&(w+="".concat(m,","))}),c+="".concat(y).concat(g,'{content:"').concat(w,'"}').concat(bo)},l=0;l<a;l++)u(l);return c}(o)})}return e.registerId=function(t){return _n(t)},e.prototype.rehydrate=function(){!this.server&&Vn&&$i(this)},e.prototype.reconstructWithOptions=function(t,n){return n===void 0&&(n=!0),new e(me(me({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(n){var r=n.useCSSOMInjection,o=n.target;return n.isServer?new gg(o):r?new hg(o):new pg(o)}(this.options),new sg(t)));var t},e.prototype.hasNameForId=function(t,n){return this.names.has(t)&&this.names.get(t).has(n)},e.prototype.registerName=function(t,n){if(_n(t),this.names.has(t))this.names.get(t).add(n);else{var r=new Set;r.add(n),this.names.set(t,r)}},e.prototype.insertRules=function(t,n,r){this.registerName(t,n),this.getTag().insertRules(_n(t),r)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(_n(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),yg=/&/g,xg=/^\s*\/\/.*$/gm;function Ma(e,t){return e.map(function(n){return n.type==="rule"&&(n.value="".concat(t," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(t," ")),n.props=n.props.map(function(r){return"".concat(t," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=Ma(n.children,t)),n})}function wg(e){var t,n,r,o=Bt,i=o.options,s=i===void 0?Bt:i,a=o.plugins,c=a===void 0?ar:a,u=function(f,h,y){return y.startsWith(n)&&y.endsWith(n)&&y.replaceAll(n,"").length>0?".".concat(t):f},l=c.slice();l.push(function(f){f.type===nr&&f.value.includes("&")&&(f.props[0]=f.props[0].replace(yg,n).replace(r,u))}),s.prefix&&l.push(jp),l.push(Op);var d=function(f,h,y,g){h===void 0&&(h=""),y===void 0&&(y=""),g===void 0&&(g="&"),t=g,n=h,r=new RegExp("\\".concat(n,"\\b"),"g");var w=f.replace(xg,""),m=Ip(y||h?"".concat(y," ").concat(h," { ").concat(w," }"):w);s.namespace&&(m=Ma(m,s.namespace));var v=[];return jn(m,Lp(l.concat(Fp(function(N){return v.push(N)})))),v};return d.hash=c.length?c.reduce(function(f,h){return h.name||gt(15),kt(f,h.name)},_a).toString():"",d}var vg=new Aa,Kr=wg(),$a=T.createContext({shouldForwardProp:void 0,styleSheet:vg,stylis:Kr});$a.Consumer;T.createContext(void 0);function Pi(){return E.useContext($a)}var bg=function(){function e(t,n){var r=this;this.inject=function(o,i){i===void 0&&(i=Kr);var s=r.name+i.hash;o.hasNameForId(r.id,s)||o.insertRules(r.id,s,i(r.rules,s,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=n,_o(this,function(){throw gt(12,String(r.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=Kr),this.name+t.hash},e}(),Sg=function(e){return e>="A"&&e<="Z"};function Di(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(n===1&&r==="-"&&e[0]==="-")return e;Sg(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var qa=function(e){return e==null||e===!1||e===""},Pa=function(e){var t,n,r=[];for(var o in e){var i=e[o];e.hasOwnProperty(o)&&!qa(i)&&(Array.isArray(i)&&i.isCss||pt(i)?r.push("".concat(Di(o),":"),i,";"):un(i)?r.push.apply(r,Fn(Fn(["".concat(o," {")],Pa(i),!1),["}"],!1)):r.push("".concat(Di(o),": ").concat((t=o,(n=i)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||t in Vp||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function dt(e,t,n,r){if(qa(e))return[];if(So(e))return[".".concat(e.styledComponentId)];if(pt(e)){if(!pt(i=e)||i.prototype&&i.prototype.isReactComponent||!t)return[e];var o=e(t);return dt(o,t,n,r)}var i;return e instanceof bg?n?(e.inject(n,r),[e.getName(r)]):[e]:un(e)?Pa(e):Array.isArray(e)?Array.prototype.concat.apply(ar,e.map(function(s){return dt(s,t,n,r)})):[e.toString()]}function _g(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(pt(n)&&!So(n))return!1}return!0}var Eg=Ea(sr),Ng=function(){function e(t,n,r){this.rules=t,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&_g(t),this.componentId=n,this.baseHash=kt(Eg,n),this.baseStyle=r,Aa.registerId(n)}return e.prototype.generateAndInjectStyles=function(t,n,r){var o=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))o=at(o,this.staticRulesId);else{var i=Mi(dt(this.rules,t,n,r)),s=Ur(kt(this.baseHash,i)>>>0);if(!n.hasNameForId(this.componentId,s)){var a=r(i,".".concat(s),void 0,this.componentId);n.insertRules(this.componentId,s,a)}o=at(o,s),this.staticRulesId=s}else{for(var c=kt(this.baseHash,r.hash),u="",l=0;l<this.rules.length;l++){var d=this.rules[l];if(typeof d=="string")u+=d;else if(d){var f=Mi(dt(d,t,n,r));c=kt(c,f+l),u+=f}}if(u){var h=Ur(c>>>0);n.hasNameForId(this.componentId,h)||n.insertRules(this.componentId,h,r(u,".".concat(h),void 0,this.componentId)),o=at(o,h)}}return o},e}(),Xn=T.createContext(void 0);Xn.Consumer;function Cg(e){var t=T.useContext(Xn),n=E.useMemo(function(){return function(r,o){if(!r)throw gt(14);if(pt(r)){var i=r(o);return i}if(Array.isArray(r)||typeof r!="object")throw gt(8);return o?me(me({},o),r):r}(e.theme,t)},[e.theme,t]);return e.children?T.createElement(Xn.Provider,{value:n},e.children):null}var Tr={};function kg(e,t,n){var r=So(e),o=e,i=!Rr(e),s=t.attrs,a=s===void 0?ar:s,c=t.componentId,u=c===void 0?function(x,A){var C=typeof x!="string"?"sc":Ci(x);Tr[C]=(Tr[C]||0)+1;var k="".concat(C,"-").concat(Zp(sr+C+Tr[C]));return A?"".concat(A,"-").concat(k):k}(t.displayName,t.parentComponentId):c,l=t.displayName,d=l===void 0?function(x){return Rr(x)?"styled.".concat(x):"Styled(".concat(Kp(x),")")}(e):l,f=t.displayName&&t.componentId?"".concat(Ci(t.displayName),"-").concat(t.componentId):t.componentId||u,h=r&&o.attrs?o.attrs.concat(a).filter(Boolean):a,y=t.shouldForwardProp;if(r&&o.shouldForwardProp){var g=o.shouldForwardProp;if(t.shouldForwardProp){var w=t.shouldForwardProp;y=function(x,A){return g(x,A)&&w(x,A)}}else y=g}var m=new Ng(n,f,r?o.componentStyle:void 0);function v(x,A){return function(C,k,B){var P=C.attrs,I=C.componentStyle,H=C.defaultProps,L=C.foldedComponentIds,z=C.styledComponentId,p=C.target,R=T.useContext(Xn),_=Pi(),$=C.shouldForwardProp||_.shouldForwardProp,D=Xp(k,R,H)||Bt,S=function(V,W,G){for(var J,Z=me(me({},W),{className:void 0,theme:G}),Q=0;Q<V.length;Q+=1){var ie=pt(J=V[Q])?J(Z):J;for(var te in ie)Z[te]=te==="className"?at(Z[te],ie[te]):te==="style"?me(me({},Z[te]),ie[te]):ie[te]}return W.className&&(Z.className=at(Z.className,W.className)),Z}(P,k,D),q=S.as||p,b={};for(var M in S)S[M]===void 0||M[0]==="$"||M==="as"||M==="theme"&&S.theme===D||(M==="forwardedAs"?b.as=S.forwardedAs:$&&!$(M,q)||(b[M]=S[M]));var O=function(V,W){var G=Pi(),J=V.generateAndInjectStyles(W,G.styleSheet,G.stylis);return J}(I,S),F=at(L,z);return O&&(F+=" "+O),S.className&&(F+=" "+S.className),b[Rr(q)&&!Sa.has(q)?"class":"className"]=F,b.ref=B,E.createElement(q,b)}(N,x,A)}v.displayName=d;var N=T.forwardRef(v);return N.attrs=h,N.componentStyle=m,N.displayName=d,N.shouldForwardProp=y,N.foldedComponentIds=r?at(o.foldedComponentIds,o.styledComponentId):"",N.styledComponentId=f,N.target=r?o.target:e,Object.defineProperty(N,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=r?function(A){for(var C=[],k=1;k<arguments.length;k++)C[k-1]=arguments[k];for(var B=0,P=C;B<P.length;B++)Zr(A,P[B],!0);return A}({},o.defaultProps,x):x}}),_o(N,function(){return".".concat(N.styledComponentId)}),i&&Ra(N,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),N}function Hi(e,t){for(var n=[e[0]],r=0,o=t.length;r<o;r+=1)n.push(t[r],e[r+1]);return n}var Bi=function(e){return Object.assign(e,{isCss:!0})};function Rg(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(pt(e)||un(e))return Bi(dt(Hi(ar,Fn([e],t,!0))));var r=e;return t.length===0&&r.length===1&&typeof r[0]=="string"?dt(r):Bi(dt(Hi(r,t)))}function Qr(e,t,n){if(n===void 0&&(n=Bt),!t)throw gt(1,t);var r=function(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return e(t,n,Rg.apply(void 0,Fn([o],i,!1)))};return r.attrs=function(o){return Qr(e,t,me(me({},n),{attrs:Array.prototype.concat(n.attrs,o).filter(Boolean)}))},r.withConfig=function(o){return Qr(e,t,me(me({},n),o))},r}var Da=function(e){return Qr(kg,e)},Jr=Da;Sa.forEach(function(e){Jr[e]=Da(e)});const Tg={bg:"#fff",primary:"#ff0072",nodeBg:"#f2f2f5",nodeColor:"#222",nodeBorder:"#222",minimapMaskBg:"#f2f2f5",controlsBg:"#fefefe",controlsBgHover:"#eee",controlsColor:"#222",controlsBorder:"#ddd"},Ag={bg:"#000",primary:"#ff0072",nodeBg:"#343435",nodeColor:"#f9f9f9",nodeBorder:"#888",minimapMaskBg:"#343435",controlsBg:"#555",controlsBgHover:"#676768",controlsColor:"#dddddd",controlsBorder:"#676768"},Ha=({id:e,label:t,selected:n,nodeStyles:r,header:o,body:i})=>(console.log("====BaseNode",e,t,n,r,o,i),j.jsxs("div",{className:"customNode "+(n?"selected":""),style:(r==null?void 0:r.shape)||{},children:[j.jsxs("div",{className:"nodeHeader",style:(r==null?void 0:r.header)||{},children:[j.jsx(Ke,{type:"source",position:Y.Right,id:e,className:"handle right react-flow__handle",style:(r==null?void 0:r.nodeContainerTargeHandleStyle)||{}}),o,j.jsx(Ke,{type:"target",position:Y.Left,id:e,className:"handle  left react-flow__handle",style:(r==null?void 0:r.nodeContainerSourceHandleStyle)||{}})]}),j.jsx("div",{className:"nodeBody",style:(r==null?void 0:r.body)||{},children:i})]})),cr=E.memo(Ha);Ha.__docgenInfo={description:"",methods:[],displayName:"BaseNode",props:{id:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},selected:{required:!0,tsType:{name:"boolean"},description:""},nodeStyles:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    shape: React.CSSProperties,
    header: React.CSSProperties,
    body: React.CSSProperties,
    nodeContainerTargeHandleStyle?: React.CSSProperties,
    nodeContainerSourceHandleStyle?: React.CSSProperties
}`,signature:{properties:[{key:"shape",value:{name:"ReactCSSProperties",raw:"React.CSSProperties",required:!0}},{key:"header",value:{name:"ReactCSSProperties",raw:"React.CSSProperties",required:!0}},{key:"body",value:{name:"ReactCSSProperties",raw:"React.CSSProperties",required:!0}},{key:"nodeContainerTargeHandleStyle",value:{name:"ReactCSSProperties",raw:"React.CSSProperties",required:!1}},{key:"nodeContainerSourceHandleStyle",value:{name:"ReactCSSProperties",raw:"React.CSSProperties",required:!1}}]}},description:""},header:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},body:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Wn=(e,t)=>e+"-"+t,Mg=(e,t,n,r)=>(console.log("getNextIncomingEdges",e,t,n),r.filter(i=>i.target===e&&i.targetHandle===t).map(i=>i)),$g=(e,t,n,r)=>(console.log("getNextOutgoingEdges",e,t,n),r.filter(i=>i.source===e&&i.sourceHandle===t).map(i=>i)),Ba=(e,t,n,r,o=[])=>Mg(e,t,n,r).reduce((a,c)=>(a.push(c),console.log("inComingEdge",c),o.findIndex(u=>u.id===c.target)===-1&&(o.push(c),Ba(c.source,c.sourceHandle,n,r,o).forEach(u=>{a.push(u),o.findIndex(l=>l.id===u.id)===-1&&o.push(c)})),a),[]),Ia=(e,t,n,r,o=[])=>{const i=$g(e,t,n,r);return console.log("====outGoingEdges",i),i.reduce((s,a)=>(s.push(a),console.log("====outGoingEdge",a),o.findIndex(c=>c.id===a.id)===-1&&(o.push(a),Ia(a.target,a.targetHandle,n,r,o).forEach(c=>{s.push(c),o.findIndex(u=>u.id===c.id)===-1&&o.push(c)})),s),[])},qg=e=>{const t=e.map(n=>n.source===n.sourceHandle||n.target===n.targetHandle?[]:[Wn(n.source,n.sourceHandle),Wn(n.target,n.targetHandle)]).flat();return[...new Set(t)]},Pg=(e,t,n,r,o,i)=>{za(n,r,o,i);const s=Ba(e,t,n,r),a=Ia(e,t,n,r);document.querySelectorAll(".nodeField").forEach(f=>{f.classList.add("inactive")});const c=s.concat(a),u=c.map(f=>f.id),l=r==null?void 0:r.map(f=>(console.log(),u.includes(f.id)?(f.animated=!0,f.style={...f.style,stroke:"lightblue",opacity:1}):f.style={opacity:.4},f));i(l),(c.length===0?[Wn(e,t)]:qg(c)).forEach(f=>{const h=document.getElementById(f);h&&(h.classList.add("highlight"),h.classList.remove("inactive"))})},za=(e,t,n,r)=>{console.log("resetHandlePathHighlight",e,n,t,r),document.querySelectorAll(".nodeField").forEach(i=>{i.classList.remove("highlight"),i.classList.remove("inactive")});const o=t==null?void 0:t.map(i=>(i.animated=!1,i.style={...i.style,stroke:"#ccc",opacity:1},i.hidden=!1,i));r(o)},Dg={shape:{},header:{},body:{},nodeContainerTargeHandleStyle:{position:"absolute",top:"10px"},nodeContainerSourceHandleStyle:{position:"absolute",top:"10px"}},Oa=({id:e,data:t,selected:n})=>{const r=ue(),{edges:o,getNodes:i,setNodes:s,setEdges:a}=r.getState(),c=i(),u=f=>{const h=f.currentTarget,y=h.getAttribute("data-node-id")||"",g=h.getAttribute("data-handle-id");Pg(y,g,c,o,s,a)},l=f=>{console.log("onMouseOut",f),za(c,o,s,a)},d=f=>{u(f)};return j.jsx(cr,{id:e,label:t.label,selected:n,nodeStyles:Dg,header:j.jsx("div",{className:"nodeName",style:{backgroundColor:"#ccc"},children:t.label}),body:j.jsx(j.Fragment,{children:t.fields&&t.fields.map(f=>j.jsxs("div",{className:"nodeField textLeft io",onMouseOver:u,onMouseOut:l,id:Wn(e,f.id),onClick:d,"data-node-id":e,"data-handle-id":f.id,children:[j.jsx(Ke,{type:"source",position:Y.Right,id:f.id,className:"handle react-flow__handle",onConnect:h=>console.log("handle onConnect",h)}),j.jsxs("div",{children:[j.jsx("span",{children:f.label}),j.jsx("span",{className:"fieldDataType",children:f.data_type})]}),j.jsx(Ke,{type:"target",position:Y.Left,id:f.id,className:"handle react-flow__handle",onConnect:h=>console.log("handle onConnect",h)})]},"i-"+f.label))})})},Hg=E.memo(Oa);Oa.__docgenInfo={description:"",methods:[],displayName:"DataTypeFieldsNode",props:{id:{required:!0,tsType:{name:"string"},description:""},data:{required:!0,tsType:{name:"signature",type:"object",raw:`{
    // data property in the Node 
    fields?: NodeField[]
    icon?: CanvasIcon, 
    body?: React.ReactNode,
    commentText?: string // TODO - move this to seperate CommentNode type 

    //
    label?: string  // display label
    properties?: object
    type? : string // this equal to node label in graph ex: Person, Project, 
    stylingOptions?: CanvasNodeStylingOptions // coloring options
    templateOptions?: object // config to get the pre-defined templatefields data from all properties
    templateData?: object // template fields with data // 
    // different between properties and templateData is, templateData is subset of all 
    // the properties data.


}`,signature:{properties:[{key:"fields",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    id: string
    label: string
    data_type?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"data_type",value:{name:"string",required:!1}}]}}],raw:"NodeField[]",required:!1}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"body",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"commentText",value:{name:"string",required:!1}},{key:"label",value:{name:"string",required:!1}},{key:"properties",value:{name:"object",required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"stylingOptions",value:{name:"signature",type:"object",raw:`{
    shapeColor: string // color used for background ; color used in MiniMap also
    shapeBorderColor: string // 

    shapeHeaderBgColor: string
    shapeHeaderTextColor: string

    shapeBodyBgColor: string // defaults to shapeColor
    shapeBodyTextColor: string
}`,signature:{properties:[{key:"shapeColor",value:{name:"string",required:!0}},{key:"shapeBorderColor",value:{name:"string",required:!0}},{key:"shapeHeaderBgColor",value:{name:"string",required:!0}},{key:"shapeHeaderTextColor",value:{name:"string",required:!0}},{key:"shapeBodyBgColor",value:{name:"string",required:!0}},{key:"shapeBodyTextColor",value:{name:"string",required:!0}}]},required:!1}},{key:"templateOptions",value:{name:"object",required:!1}},{key:"templateData",value:{name:"object",required:!1}}]}},description:""},selected:{required:!0,tsType:{name:"boolean"},description:""}}};const Bg="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20fill='currentColor'%20class='bi%20bi-sticky'%20viewBox='0%200%2016%2016'%3e%3cpath%20d='M2.5%201A1.5%201.5%200%200%200%201%202.5v11A1.5%201.5%200%200%200%202.5%2015h6.086a1.5%201.5%200%200%200%201.06-.44l4.915-4.914A1.5%201.5%200%200%200%2015%208.586V2.5A1.5%201.5%200%200%200%2013.5%201h-11zM2%202.5a.5.5%200%200%201%20.5-.5h11a.5.5%200%200%201%20.5.5V8H9.5A1.5%201.5%200%200%200%208%209.5V14H2.5a.5.5%200%200%201-.5-.5v-11zm7%2011.293V9.5a.5.5%200%200%201%20.5-.5h4.293L9%2013.793z'/%3e%3c/svg%3e",Eo=({html:e})=>typeof e=="string"?j.jsx("div",{dangerouslySetInnerHTML:{__html:e||""}}):e;Eo.__docgenInfo={description:"",methods:[],displayName:"RenderedHTML",props:{html:{required:!0,tsType:{name:"union",raw:"string | React.ReactNode",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"}]},description:""}}};const Ig={shape:{backgroundColor:"#ffffcc",borderLeft:"5px solid #ffeb3b",color:"#222222",padding:"5px 10px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 15%), 0 2px 4px -1px rgb(0 0 0 / 8%);",width:"180px"},header:{},body:{},nodeContainerTargeHandleStyle:{position:"absolute",top:"20px"},nodeContainerSourceHandleStyle:{position:"absolute",top:"20px"}},La=({id:e,data:t,selected:n})=>j.jsx(cr,{id:e,label:t.label,selected:n,nodeStyles:Ig,header:j.jsxs("div",{style:{paddingBottom:"5px"},children:[j.jsx("img",{src:Bg,style:{position:"absolute",top:"0",right:"0",width:"14px"}}),j.jsx("strong",{children:t.label})]}),body:j.jsx(j.Fragment,{children:j.jsx(Eo,{html:(t==null?void 0:t.commentText)||""})})}),zg=E.memo(La);La.__docgenInfo={description:"",methods:[],displayName:"CommentNode",props:{id:{required:!0,tsType:{name:"string"},description:""},data:{required:!0,tsType:{name:"signature",type:"object",raw:`{
    // data property in the Node 
    fields?: NodeField[]
    icon?: CanvasIcon, 
    body?: React.ReactNode,
    commentText?: string // TODO - move this to seperate CommentNode type 

    //
    label?: string  // display label
    properties?: object
    type? : string // this equal to node label in graph ex: Person, Project, 
    stylingOptions?: CanvasNodeStylingOptions // coloring options
    templateOptions?: object // config to get the pre-defined templatefields data from all properties
    templateData?: object // template fields with data // 
    // different between properties and templateData is, templateData is subset of all 
    // the properties data.


}`,signature:{properties:[{key:"fields",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    id: string
    label: string
    data_type?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"data_type",value:{name:"string",required:!1}}]}}],raw:"NodeField[]",required:!1}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"body",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"commentText",value:{name:"string",required:!1}},{key:"label",value:{name:"string",required:!1}},{key:"properties",value:{name:"object",required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"stylingOptions",value:{name:"signature",type:"object",raw:`{
    shapeColor: string // color used for background ; color used in MiniMap also
    shapeBorderColor: string // 

    shapeHeaderBgColor: string
    shapeHeaderTextColor: string

    shapeBodyBgColor: string // defaults to shapeColor
    shapeBodyTextColor: string
}`,signature:{properties:[{key:"shapeColor",value:{name:"string",required:!0}},{key:"shapeBorderColor",value:{name:"string",required:!0}},{key:"shapeHeaderBgColor",value:{name:"string",required:!0}},{key:"shapeHeaderTextColor",value:{name:"string",required:!0}},{key:"shapeBodyBgColor",value:{name:"string",required:!0}},{key:"shapeBodyTextColor",value:{name:"string",required:!0}}]},required:!1}},{key:"templateOptions",value:{name:"object",required:!1}},{key:"templateData",value:{name:"object",required:!1}}]}},description:""},selected:{required:!0,tsType:{name:"boolean"},description:""}}};const No=({icon:e})=>(console.log("icon, tyoeof icon",e,typeof e),typeof e=="string"?e.startsWith("http")?j.jsx("img",{src:e,width:16,height:16,style:{backgroundPosition:"center",backgroundRepeat:"no-repeat",border:"none",marginRight:"10px",backgroundSize:"cover"},alt:"icon"}):j.jsx("span",{style:{marginRight:"10px"},children:e}):typeof e=="function"?j.jsx("span",{style:{marginRight:"10px"},children:T.createElement(e)}):j.jsx("span",{style:{marginRight:"10px"},children:e}));No.__docgenInfo={description:"",methods:[],displayName:"RenderIconOrImgString",props:{icon:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Og={shape:{},header:{},body:{}},Fa=({id:e,data:t,selected:n})=>(console.log("=====data.icon",t.icon,typeof t.icon),j.jsx(cr,{id:e,label:t.label,selected:n,nodeStyles:Og,header:j.jsxs("div",{style:{margin:"5px 10px"},children:[t.icon?j.jsx(No,{icon:t.icon}):j.jsx(j.Fragment,{}),j.jsx("strong",{children:t.label})]}),body:j.jsx(j.Fragment,{})})),Lg=E.memo(Fa);Fa.__docgenInfo={description:"",methods:[],displayName:"GenericNode",props:{id:{required:!0,tsType:{name:"string"},description:""},data:{required:!0,tsType:{name:"signature",type:"object",raw:`{
    // data property in the Node 
    fields?: NodeField[]
    icon?: CanvasIcon, 
    body?: React.ReactNode,
    commentText?: string // TODO - move this to seperate CommentNode type 

    //
    label?: string  // display label
    properties?: object
    type? : string // this equal to node label in graph ex: Person, Project, 
    stylingOptions?: CanvasNodeStylingOptions // coloring options
    templateOptions?: object // config to get the pre-defined templatefields data from all properties
    templateData?: object // template fields with data // 
    // different between properties and templateData is, templateData is subset of all 
    // the properties data.


}`,signature:{properties:[{key:"fields",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    id: string
    label: string
    data_type?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"data_type",value:{name:"string",required:!1}}]}}],raw:"NodeField[]",required:!1}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"body",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"commentText",value:{name:"string",required:!1}},{key:"label",value:{name:"string",required:!1}},{key:"properties",value:{name:"object",required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"stylingOptions",value:{name:"signature",type:"object",raw:`{
    shapeColor: string // color used for background ; color used in MiniMap also
    shapeBorderColor: string // 

    shapeHeaderBgColor: string
    shapeHeaderTextColor: string

    shapeBodyBgColor: string // defaults to shapeColor
    shapeBodyTextColor: string
}`,signature:{properties:[{key:"shapeColor",value:{name:"string",required:!0}},{key:"shapeBorderColor",value:{name:"string",required:!0}},{key:"shapeHeaderBgColor",value:{name:"string",required:!0}},{key:"shapeHeaderTextColor",value:{name:"string",required:!0}},{key:"shapeBodyBgColor",value:{name:"string",required:!0}},{key:"shapeBodyTextColor",value:{name:"string",required:!0}}]},required:!1}},{key:"templateOptions",value:{name:"object",required:!1}},{key:"templateData",value:{name:"object",required:!1}}]}},description:""},selected:{required:!0,tsType:{name:"boolean"},description:""}}};const Fg={shape:{},header:{background:"var(--canavas-header-bg)"},body:{padding:"10px",borderTop:"1px solid var(--canvas-border)"},nodeContainerTargeHandleStyle:{position:"absolute",top:"10px"},nodeContainerSourceHandleStyle:{position:"absolute",top:"10px"}},ja=({id:e,data:t,selected:n})=>(console.log("=====data.icon",t.icon,typeof t.icon),j.jsx(cr,{id:e,label:t.label,selected:n,nodeStyles:Fg,header:j.jsxs("div",{style:{margin:"5px 10px"},children:[t.icon&&j.jsx(No,{icon:t.icon}),j.jsx("strong",{children:t.label})]}),body:j.jsx(j.Fragment,{children:t.body?j.jsx(Eo,{html:t.body}):j.jsx(j.Fragment,{})})})),jg=E.memo(ja);ja.__docgenInfo={description:"",methods:[],displayName:"CardNode",props:{id:{required:!0,tsType:{name:"string"},description:""},data:{required:!0,tsType:{name:"signature",type:"object",raw:`{
    // data property in the Node 
    fields?: NodeField[]
    icon?: CanvasIcon, 
    body?: React.ReactNode,
    commentText?: string // TODO - move this to seperate CommentNode type 

    //
    label?: string  // display label
    properties?: object
    type? : string // this equal to node label in graph ex: Person, Project, 
    stylingOptions?: CanvasNodeStylingOptions // coloring options
    templateOptions?: object // config to get the pre-defined templatefields data from all properties
    templateData?: object // template fields with data // 
    // different between properties and templateData is, templateData is subset of all 
    // the properties data.


}`,signature:{properties:[{key:"fields",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    id: string
    label: string
    data_type?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"data_type",value:{name:"string",required:!1}}]}}],raw:"NodeField[]",required:!1}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"body",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"commentText",value:{name:"string",required:!1}},{key:"label",value:{name:"string",required:!1}},{key:"properties",value:{name:"object",required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"stylingOptions",value:{name:"signature",type:"object",raw:`{
    shapeColor: string // color used for background ; color used in MiniMap also
    shapeBorderColor: string // 

    shapeHeaderBgColor: string
    shapeHeaderTextColor: string

    shapeBodyBgColor: string // defaults to shapeColor
    shapeBodyTextColor: string
}`,signature:{properties:[{key:"shapeColor",value:{name:"string",required:!0}},{key:"shapeBorderColor",value:{name:"string",required:!0}},{key:"shapeHeaderBgColor",value:{name:"string",required:!0}},{key:"shapeHeaderTextColor",value:{name:"string",required:!0}},{key:"shapeBodyBgColor",value:{name:"string",required:!0}},{key:"shapeBodyTextColor",value:{name:"string",required:!0}}]},required:!1}},{key:"templateOptions",value:{name:"object",required:!1}},{key:"templateData",value:{name:"object",required:!1}}]}},description:""},selected:{required:!0,tsType:{name:"boolean"},description:""}}};const Vg={DataTypeFieldsNode:Hg,CommentNode:zg,GenericNode:Lg,CardNode:jg};function Va(e){const{sourceX:t,sourceY:n,targetX:r,targetY:o}=e,i=(t-r)*.6,a=`M ${t} ${n} A ${i} 20 0 1 0 ${r} ${o}`;return j.jsxs(j.Fragment,{children:[j.jsx(It,{path:a,...e}),j.jsx(ms,{x:r-15,y:o-15,label:e.label,labelStyle:e.labelStyle,labelShowBg:!0,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius})]})}Va.__docgenInfo={description:"",methods:[],displayName:"SelfConnectingEdge"};const Yg={SelfConnectingEdge:Va};class Xg{constructor(){ce(this,"getNextIncomingEdges",(t,n)=>n.filter(o=>o.target===t).map(o=>o));ce(this,"getNextOutgoingEdges",(t,n)=>n.filter(o=>o.source===t).map(o=>o));ce(this,"getNextBothEdges",(t,n)=>[...this.getNextIncomingEdges(t,n),...this.getNextOutgoingEdges(t,n)])}}const Ii=new Xg;class Wg{constructor(){ce(this,"highlightNodeAndNeighbors",(t,n,r)=>{const o=r.getEdges();Ii.getNextBothEdges(n.id,o).forEach(s=>{this.highlightEdgeNeighbors(t,s,r)})});ce(this,"unHighlightNodeAndNeighbors",(t,n,r)=>{const o=r.getEdges();Ii.getNextBothEdges(n.id,o).forEach(s=>{this.unHighlightEdgeNeighbors(t,s,r)})});ce(this,"highlightEdgeNeighbors",(t,n,r)=>{console.log("highlightEdgeNeighbors",n,t);const o=r.getNode(n.source),i=r.getNode(n.target);o&&this.highlightNode(o,r),i&&this.highlightNode(i,r),this.highlightEdge(n,r)});ce(this,"unHighlightEdgeNeighbors",(t,n,r)=>{console.log("unHighlightEdgeNeighbors",n,t);const o=r.getNode(n.source),i=r.getNode(n.target);o&&this.unHighlightNode(o,r),i&&this.unHighlightNode(i,r),this.unHighlightEdge(n,r)});ce(this,"highlightNode",(t,n)=>{console.log("highlightNode",t,n);const r=document.querySelector(".react-flow__node[data-id='"+t.id+"']");r&&(r.style.borderColor="green")});ce(this,"unHighlightNode",(t,n)=>{console.log("unHighlightNode",t,n);const r=document.querySelector(".react-flow__node[data-id='"+t.id+"']");r&&(r.style.borderColor="var(--canvas-border)")});ce(this,"highlightEdge",(t,n)=>{n==null||n.setEdges(r=>r.map(o=>(o.id===t.id&&(o.style={strokeWidth:2},o.animated=!0),o)))});ce(this,"unHighlightEdge",(t,n)=>{n==null||n.setEdges(r=>r.map(o=>(o.id===t.id&&(o.style={strokeWidth:1},o.animated=!1),o)))})}}const En=new Wg;class Gg{constructor(){ce(this,"onEdgeClick",(t,n,r)=>{console.log("==onEdgeClick",t,n,r,r==null?void 0:r.getEdges()),r==null||r.setEdges(o=>o.map(i=>(i.id===n.id&&(i.animated=!0),i)))});ce(this,"onEdgeMouseEnter",(t,n,r)=>{console.log("==onEdgeMouseEnter",t,n,r,r==null?void 0:r.getEdges()),r&&En.highlightEdgeNeighbors(t,n,r)});ce(this,"onEdgeMouseLeave",(t,n,r)=>{console.log("==onEdgeMouseLeave",t,n,r,r==null?void 0:r.getEdges()),r&&En.unHighlightEdgeNeighbors(t,n,r)});ce(this,"onNodeClick",(t,n)=>{console.log("==onNodeClick",t,n)});ce(this,"onNodeDoubleClick",(t,n)=>{console.log("==onNodeDoubleClick",t,n)});ce(this,"onNodeMouseEnter",(t,n,r)=>{console.log("==onNodeMouseEnter",n.id),r&&En.highlightNodeAndNeighbors(t,n,r)});ce(this,"onNodeMouseLeave",(t,n,r)=>{console.log("==onNodeMouseLeave",n.id),r&&En.unHighlightNodeAndNeighbors(t,n,r)});ce(this,"onNodeContextMenu",(t,n)=>{console.log("==onNodeContextMenu",t,n)});ce(this,"onPaneClick",(t,n)=>{console.log("==onPaneClick",t,n)})}}const Ug={nodes:{type:"Collection"},edges:{type:Le.Step,markerEnd:{type:cn.ArrowClosed},animated:!1}},Zg={width:"100%",height:"100vh"};class Kg{}class Qg extends Kg{getLayoutedElements(t,n,r,o){return console.log("=====NoLayoutEngine",t,n,r,o),{layoutedNodes:t.map(i=>({...i,position:i.position||{x:0,y:0}})),layoutedEdges:n}}}const Jg=({children:e,initialNodes:t=[],initialEdges:n=[],layoutEngine:r=new Qg,NodeContextMenu:o,EdgeContextMenu:i,style:s=Zg,canvasSettings:a=Ug,canvasNodeTemplates:c=Vg,canvasEdgeTemplates:u=Yg,canvasInteractions:l=new Gg,hideAttribution:d=!1})=>{console.log("==FlowCanvas canvasSettings",a);const[f,h]=E.useState(null),[y,g]=E.useState("LR");console.log("===setDirection",g);const[w,m]=E.useState("dark"),v=w==="light"?Tg:Ag,N=()=>{m(b=>b==="light"?"dark":"light")};E.useEffect(()=>{var b;console.log("Mode changed to:",w),(b=document.querySelector("html"))==null||b.setAttribute("data-canvas-theme",w)},[w]),t=t.map(b=>({...b,position:b.position||{x:0,y:0}}));const[x,A]=tp(t),[C,k]=np(n),B=E.useCallback(b=>A(M=>yo(b,M)),[A]),P=E.useCallback(b=>k(M=>Gs(b,M)),[k]),I=E.useRef(null),[H,L]=E.useState(null),z=E.useCallback((b,M)=>{b.preventDefault();const O=I.current?I.current.getBoundingClientRect():{width:0,height:0};L({id:M.id,type:"node",top:b.clientY<O.height-200?b.clientY:0,left:b.clientX<O.width-200?b.clientX:0,right:b.clientX>=O.width-200?O.width-b.clientX:0,bottom:b.clientY>=O.height-200?O.height-b.clientY:0})},[L]),p=E.useCallback((b,M)=>{b.preventDefault();const O=I.current?I.current.getBoundingClientRect():{width:0,height:0};L({id:M.id,type:"edge",top:b.clientY<O.height-200?b.clientY:0,left:b.clientX<O.width-200?b.clientX:0,right:b.clientX>=O.width-200?O.width-b.clientX:0,bottom:b.clientY>=O.height-200?O.height-b.clientY:0})},[L]),R=b=>{h(b),$(y,b)},_=E.useCallback(b=>k(M=>ks({...b},M)),[]),$=E.useCallback((b,M)=>{M=M;const{layoutedNodes:O,layoutedEdges:F}=r.getLayoutedElements(x,C,M,b);console.log("=====layoutedNodes",O,F),A([...O]),k([...F]),M==null||M.zoomTo(1),M==null||M.fitView()},[x,C,f]),D=C.map(b=>(b.source===b.target&&(b.type="SelfConnectingEdge"),b)),S=Jr(fp)`
    background-color: ${b=>b.theme.bg};

    .react-flow__minimap-mask {
      fill: ${b=>b.theme.minimapMaskBg};
    }

    .react-flow__minimap-node {
      stroke: none;
    }
  `,q=Jr(wp)`
    button {
      background-color: ${b=>b.theme.controlsBg};
      color: ${b=>b.theme.controlsColor};
      border-bottom: 1px solid ${b=>b.theme.controlsBorder};

      &:hover {
        background-color: ${b=>b.theme.controlsBgHover};
      }

      path {
        fill: currentColor;
      }
    }
  `;return j.jsx("div",{style:s,children:j.jsx(Cg,{theme:v,children:j.jsx(xo,{children:j.jsxs(aa,{ref:I,nodes:x,edges:D,onNodesChange:B,onEdgesChange:P,onConnect:_,onInit:R,onEdgeClick:(b,M)=>l&&l.onEdgeClick(b,M,f),onEdgeMouseEnter:(b,M)=>l&&l.onEdgeMouseEnter(b,M,f),onEdgeMouseLeave:(b,M)=>l&&l.onEdgeMouseLeave(b,M,f),onNodeMouseEnter:(b,M)=>l&&l.onNodeMouseEnter(b,M,f),onNodeMouseLeave:(b,M)=>l&&l.onNodeMouseLeave(b,M,f),onNodeContextMenu:z,onEdgeContextMenu:p,fitView:!0,minZoom:.2,attributionPosition:"top-right",nodeTypes:c,edgeTypes:u,proOptions:{hideAttribution:d},children:[H&&i&&H.type==="edge"&&j.jsx(i,{...H}),H&&o&&H.type==="node"&&j.jsx(o,{...H}),j.jsx(S,{nodeColor:b=>{switch(b.type){case"DataStore":return"LightGreen";case"Collection":return"Lavender";case"DerivedCollectionNode":return"LightBlue";default:return"#eee"}},zoomable:!0,pannable:!0}),j.jsx(q,{}),j.jsx(Np,{color:"#444",style:{backgroundColor:v.bg},gap:16}),j.jsxs(Jn,{position:"top-right",children:[j.jsx("button",{onClick:()=>$("TB"),children:"vertical layout"}),j.jsx("button",{onClick:()=>$("LR"),children:"horizontal layout"}),j.jsx("button",{onClick:N,children:"switch mode"})]}),e]})})})})};Jg.__docgenInfo={description:"",methods:[],displayName:"FlowCanvas",props:{initialNodes:{required:!1,tsType:{name:"Array",elements:[{name:"intersection",raw:"Omit<T, keyof R> & R",elements:[{name:"Omit",elements:[{name:"Node"},{name:"signature",type:"object",raw:`{
    data?: CanvasNodeData
    position?: XYPosition
    // fields?: NodeField[]
}`,signature:{properties:[{key:"data",value:{name:"signature",type:"object",raw:`{
    // data property in the Node 
    fields?: NodeField[]
    icon?: CanvasIcon, 
    body?: React.ReactNode,
    commentText?: string // TODO - move this to seperate CommentNode type 

    //
    label?: string  // display label
    properties?: object
    type? : string // this equal to node label in graph ex: Person, Project, 
    stylingOptions?: CanvasNodeStylingOptions // coloring options
    templateOptions?: object // config to get the pre-defined templatefields data from all properties
    templateData?: object // template fields with data // 
    // different between properties and templateData is, templateData is subset of all 
    // the properties data.


}`,signature:{properties:[{key:"fields",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    id: string
    label: string
    data_type?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"data_type",value:{name:"string",required:!1}}]}}],raw:"NodeField[]",required:!1}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"body",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"commentText",value:{name:"string",required:!1}},{key:"label",value:{name:"string",required:!1}},{key:"properties",value:{name:"object",required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"stylingOptions",value:{name:"signature",type:"object",raw:`{
    shapeColor: string // color used for background ; color used in MiniMap also
    shapeBorderColor: string // 

    shapeHeaderBgColor: string
    shapeHeaderTextColor: string

    shapeBodyBgColor: string // defaults to shapeColor
    shapeBodyTextColor: string
}`,signature:{properties:[{key:"shapeColor",value:{name:"string",required:!0}},{key:"shapeBorderColor",value:{name:"string",required:!0}},{key:"shapeHeaderBgColor",value:{name:"string",required:!0}},{key:"shapeHeaderTextColor",value:{name:"string",required:!0}},{key:"shapeBodyBgColor",value:{name:"string",required:!0}},{key:"shapeBodyTextColor",value:{name:"string",required:!0}}]},required:!1}},{key:"templateOptions",value:{name:"object",required:!1}},{key:"templateData",value:{name:"object",required:!1}}]},required:!1}},{key:"position",value:{name:"XYPosition",required:!1}}]}}],raw:"Omit<T, keyof R>"},{name:"signature",type:"object",raw:`{
    data?: CanvasNodeData
    position?: XYPosition
    // fields?: NodeField[]
}`,signature:{properties:[{key:"data",value:{name:"signature",type:"object",raw:`{
    // data property in the Node 
    fields?: NodeField[]
    icon?: CanvasIcon, 
    body?: React.ReactNode,
    commentText?: string // TODO - move this to seperate CommentNode type 

    //
    label?: string  // display label
    properties?: object
    type? : string // this equal to node label in graph ex: Person, Project, 
    stylingOptions?: CanvasNodeStylingOptions // coloring options
    templateOptions?: object // config to get the pre-defined templatefields data from all properties
    templateData?: object // template fields with data // 
    // different between properties and templateData is, templateData is subset of all 
    // the properties data.


}`,signature:{properties:[{key:"fields",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    id: string
    label: string
    data_type?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"data_type",value:{name:"string",required:!1}}]}}],raw:"NodeField[]",required:!1}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"body",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"commentText",value:{name:"string",required:!1}},{key:"label",value:{name:"string",required:!1}},{key:"properties",value:{name:"object",required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"stylingOptions",value:{name:"signature",type:"object",raw:`{
    shapeColor: string // color used for background ; color used in MiniMap also
    shapeBorderColor: string // 

    shapeHeaderBgColor: string
    shapeHeaderTextColor: string

    shapeBodyBgColor: string // defaults to shapeColor
    shapeBodyTextColor: string
}`,signature:{properties:[{key:"shapeColor",value:{name:"string",required:!0}},{key:"shapeBorderColor",value:{name:"string",required:!0}},{key:"shapeHeaderBgColor",value:{name:"string",required:!0}},{key:"shapeHeaderTextColor",value:{name:"string",required:!0}},{key:"shapeBodyBgColor",value:{name:"string",required:!0}},{key:"shapeBodyTextColor",value:{name:"string",required:!0}}]},required:!1}},{key:"templateOptions",value:{name:"object",required:!1}},{key:"templateData",value:{name:"object",required:!1}}]},required:!1}},{key:"position",value:{name:"XYPosition",required:!1}}]}}]}],raw:"CanvasNode[]"},description:"",defaultValue:{value:"[]",computed:!1}},initialEdges:{required:!1,tsType:{name:"Array",elements:[{name:"Edge"}],raw:"CanvasEdge[]"},description:"",defaultValue:{value:"[]",computed:!1}},layoutEngine:{required:!1,tsType:{name:"LayoutEngine"},description:"",defaultValue:{value:"new NoLayoutEngine()",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},canvasSettings:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    edges: CanvasEdgeSettings
    nodes: CanvasNodeSettings
}`,signature:{properties:[{key:"edges",value:{name:"signature",type:"object",raw:`{
    type: ConnectionLineType;
    markerEnd?: object
    markerStart?: string
    animated?: boolean
    style?: object
}`,signature:{properties:[{key:"type",value:{name:"ConnectionLineType",required:!0}},{key:"markerEnd",value:{name:"object",required:!1}},{key:"markerStart",value:{name:"string",required:!1}},{key:"animated",value:{name:"boolean",required:!1}},{key:"style",value:{name:"object",required:!1}}]},required:!0}},{key:"nodes",value:{name:"signature",type:"object",raw:`{
    type: string;
    style?: object
}`,signature:{properties:[{key:"type",value:{name:"string",required:!0}},{key:"style",value:{name:"object",required:!1}}]},required:!0}}]}},description:"",defaultValue:{value:`{
    nodes: {
        type: "Collection"
    },
    edges: {
        type: ConnectionLineType.Step,
        markerEnd: {
            type: MarkerType.ArrowClosed
        },
        animated: false
    }
}`,computed:!1}},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:"",defaultValue:{value:`{
    width : "100%",
    height: "100vh"
}`,computed:!1}},canvasNodeTemplates:{required:!1,tsType:{name:"NodeTypes"},description:"",defaultValue:{value:`{
    DataTypeFieldsNode: DataTypeFieldsNode,
    CommentNode: CommentNode,
    GenericNode: GenericNode,
    CardNode: CardNode
    // DataStore: DataStoreNode,
// DerivedCollection: DerivedCollectionNode
}`,computed:!1}},canvasEdgeTemplates:{required:!1,tsType:{name:"EdgeTypes"},description:"",defaultValue:{value:`{
    SelfConnectingEdge: SelfConnectingEdge,
}`,computed:!1}},canvasInteractions:{required:!1,tsType:{name:"CanvasInteractions"},description:"",defaultValue:{value:"new CanvasInteractions()",computed:!1}},NodeContextMenu:{required:!1,tsType:{name:"ReactFC",raw:"React.FC<ContextMenuType>",elements:[{name:"signature",type:"object",raw:`{
    id: string; 
    type: string; 
    top: number; 
    left: number; 
    right: number; 
    bottom: number; 
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"string",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}},{key:"bottom",value:{name:"number",required:!0}}]}}]},description:""},EdgeContextMenu:{required:!1,tsType:{name:"ReactFC",raw:"React.FC<ContextMenuType>",elements:[{name:"signature",type:"object",raw:`{
    id: string; 
    type: string; 
    top: number; 
    left: number; 
    right: number; 
    bottom: number; 
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"string",required:!0}},{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}},{key:"bottom",value:{name:"number",required:!0}}]}}]},description:""},hideAttribution:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};export{Jg as F,Kg as L,cn as M,Y as P};
